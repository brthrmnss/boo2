<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><html><head><title>Chapter&#xA0;14.&#xA0;Physics Engines</title><link rel="stylesheet" type="text/css" href="core.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="up" href="pt02.html" title="Part&#xA0;II.&#xA0;Rigid-Body Dynamics"><link rel="prev" href="ch13.html" title="Chapter&#xA0;13.&#xA0;Connecting Objects"><link rel="next" href="pt03.html" title="Part&#xA0;III.&#xA0;Physical Modeling"></head><body>
         
        <script>
        function ok(){ 
            window.gggs()
            return;
            //$('#musicPlayer').parent().remove();
            //speakTransportPanelDialogV2.closeEmoteDialog()
            //speakTransportPanelDialog.closeEmoteDialog()
            //
            debugger
            let url = 'http://127.0.0.1:8080/uploads/extracted/' +
             'Crazy Rich Asians  Kevin Kwanepub/' +
              'jsonSets/OEBPS/Kwan_9780385536981_epub_prl_r1.htm.html.sentences.json'
            speakTransportPanelDialogV2.sideLoadSentences2(null, null, null, url)
            
        }
        setTimeout(ok, 1500)
        </script>
        <div style="background:white">````````</div><section class="chapter" title="Chapter&#xA0;14.&#xA0;Physics Engines" epub:type="chapter" id="physics_engines"><div class="titlepage"><div><div><h2 class="title"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">1</span><span sentence-index="7670" class="highlight2">Chapter&#xA0;14.&#xA0;Physics  Engines</span></span></h2></div></div></div><p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">2</span><span sentence-index="7671" class="highlight3">A  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">2</span><span sentence-index="7671" class="highlight4">physics  engine</span></span></em></span><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">2</span><span sentence-index="7671" class="highlight2"> is  the  part  of  </span></span><a id="I_indexterm8_id337060" class="indexterm"><span class="nonQuoteStr" gspkNameUnknown="narrator" gsIndex="1"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7672</span><span sentence-index="7672" class="highlight3">your  game  that  contains  all  the  code  required  for  whatever    you&apos;re  trying  to  simulate  using  physics-based  techniques. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7673</span><span sentence-index="7673" class="highlight4">  For  many  game    programmers,  a  physics  engine  is  a  real-time,  rigid-body  simulator  such  as    the  sort  we&apos;ve  discussed  earlier  in  this  book. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7674</span><span sentence-index="7674" class="highlight2">  The  open  source  and    licensable  physics  engines  available  to  you  are  typically  of  the    rigid-body-simulator  variety. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7675</span><span sentence-index="7675" class="highlight3">  Some  physics  engines  are  rather  generic  and    are  useful  for  general  rigid  bodies  and  particles;  others  include  various    connectors  and  constraints,  enabling  ragdoll  simulation. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7676</span><span sentence-index="7676" class="highlight4">  Still  others  focus    on  soft  bodies  and  fluids. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7677</span><span sentence-index="7677" class="highlight2">  Fewer  actually  focus  on  the  physics  of  some    specific  thing,  like  a  car  or  a  boat. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7678</span><span sentence-index="7678" class="highlight3">  A  simple  Internet  search  on  the  phrase    </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7679</span><span sentence-index="7679" class="highlight4" gspkNameUnknown="narrator" gsIndex="1"> &quot;game  physics  engine&quot; </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7680</span><span sentence-index="7680" class="highlight2">  will  generate  many  links  to  potential  options  for  your    use. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7681</span><span sentence-index="7681" class="highlight3">  That  said,  you  could  always  write  your  own  physics  engine.</span></span></a></p><div class="sect1" title="Building Your Own Physics Engine"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="building_your_own_physics_engine"><a id="I_indexterm8_id337060" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">15</span><span sentence-index="7684" class="highlight4">Building  Your  Own  Physics  Engine</span></span></a></h2></div></div></div><p><a id="I_indexterm8_id337060" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">17</span><span sentence-index="7686" class="highlight2">We&apos;re  advocates  of  </span></span></a><a id="ph14.1" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7687</span><span sentence-index="7687" class="highlight3">using  physics  where  you  need  it. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7688</span><span sentence-index="7688" class="highlight4">  Sure,  you  can  write  a        general-purpose  physics  engine  for  a  game,  but  if  you&apos;re  creating  a  game        that  doesn&apos;t  require  a  general-purpose  physics  engine,  then  don&apos;t  write        one. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7689</span><span sentence-index="7689" class="highlight2">  That  may  sound  obvious,  but  sometimes  we  are  compelled  to  do  more        than  what  we  need  just  so  we  can  say  we  did  it. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">21</span><span sentence-index="7690" class="highlight3"> Aside  from  the  effort        </span></span></a><a id="I_indexterm8_id337113" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7691</span><span sentence-index="7691" class="highlight4">involved,  a  general-purpose  physics  engine  will  probably  be        less  efficient  than  a  purpose-built  physics  engine. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">23</span><span sentence-index="7692" class="highlight2"> By        </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">23</span><span sentence-index="7692" class="highlight3">purpose-built</span></span></em></span><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">23</span><span sentence-index="7692" class="highlight4">,  we  </span></span></a><a id="I_indexterm8_id337129" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7693</span><span sentence-index="7693" class="highlight2">mean  designing  the  physics  engine  specifically  to  suit  what        you&apos;re  trying  to  simulate. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7694</span><span sentence-index="7694" class="highlight3">  For  example,  a  general-purpose  physics  engine        would  surely  include  particles,  rigid  bodies,  connectors,  other  force        effectors,  and  who  knows  what  else&#x2014;fluids,  perhaps&#x2014;and  be  fully  3D. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7695</span><span sentence-index="7695" class="highlight4">  But  if        you&apos;re  writing  a  2D  side-scrolling  game  for  a  smartphone,  you  certainly        won&apos;t  need  3D  with  the  associated  complexities  involved  in  dealing  with        rotation  and  collisions  in  3D;  and  if  your  game  simply  involves  throwing  a        ball  of  fuzz  at  some  arbitrary  junk,  then  you  may  not  even  need  to  deal        with  rigid  bodies  at  all. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">27</span><span sentence-index="7696" class="highlight2"> We&apos;re  being  somewhat  facetious  here,  but  the        point  is,  unless  you  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">27</span><span sentence-index="7696" class="highlight3">must</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7696</span><span sentence-index="7696" class="highlight4">  write  a  general-purpose        physics  engine&#x2014;say,  if  you  plan  to  license  it  as  a  middleware  product  or        use  it  in  a  variety  of  game  types&#x2014;then  don&apos;t  write  one. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7697</span><span sentence-index="7697" class="highlight2">  Instead,  write  one        specifically  optimized  for  the  game  you&apos;re  working  on.</span></span></a></p><p><a id="I_indexterm8_id337129" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7700</span><span sentence-index="7700" class="highlight3">Let&apos;s  consider  a  few  examples. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">32</span><span sentence-index="7701" class="highlight4"> Let&apos;s  say  you&apos;re  writing  a  3D        first-person  </span></span></a><a id="I_indexterm8_id337154" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7702</span><span sentence-index="7702" class="highlight2">shooter  and  you  want  to  use  physics  to  simulate  how  wooden        barrels  and  crates  blow  apart  when  shot. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7703</span><span sentence-index="7703" class="highlight3">  Typically,  such  an  effect  would        show  pieces  of  wood  flying  off  in  different  directions  while  falling  under        the  influence  of  gravity. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7704</span><span sentence-index="7704" class="highlight4">  You  could  simulate  such  an  effect  in  3D  using        rigid  bodies  and  you  wouldn&apos;t  even  need  to  consider  collisions,  unless  you        wanted  the  pieces  to  bounce  off  each  other  or  other  objects. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7705</span><span sentence-index="7705" class="highlight2">  Ignoring        these  aspects  greatly  simplifies  the  underlying  physics  engine. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7706</span><span sentence-index="7706" class="highlight3">  Consider        another  example. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7707</span><span sentence-index="7707" class="highlight4">  Let&apos;s  say  you&apos;re  working  on  a  game  involving  flying  an        airplane. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7708</span><span sentence-index="7708" class="highlight2">  You  can  use  physics  to  simulate  the  flight  dynamics,  as  we        explain  in  this  book,  without  the  need  for  particles,  connectors,  or  even        collision  response.</span></span></a></p><p><a id="I_indexterm8_id337154" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7711</span><span sentence-index="7711" class="highlight3">The  point  of  all  this  discussion  is  that  you  should  consider  which  aspects  of  your  game            will  really  benefit  from  physics  and  write  your  physics  engine  to  deal  specifically  with  those            aspects.</span></span></a></p><p><a id="I_indexterm8_id337154" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7714</span><span sentence-index="7714" class="highlight4">Another  thing  to  consider  is  whether  or  not  you  need  real-time  physics. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">46</span><span sentence-index="7715" class="highlight2"> You  might  expect,            after  reading  the  available  game  physics  literature,  that  your  game  must  include  real-time            simulations  </span></span></a><a id="I_indexterm8_id337183" class="indexterm"></a><a id="I_indexterm8_id337193" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7717</span><span sentence-index="7717" class="highlight3">if  it  is  to  incorporate  physics. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7718</span><span sentence-index="7718" class="highlight4">  However,  there  are  many  ways  to  include  physics            in  a  game  without  having  to  solve  the  physics  via  real-time  simulations. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">50</span><span sentence-index="7719" class="highlight2"> We  show  you  an            example  in  </span></span></a><a class="xref" href="ch19.html" title="Chapter&#xA0;19.&#xA0;Sports"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">51</span><span sentence-index="7720" class="highlight3">Chapter&#xA0;19</span></span></a><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">51</span><span sentence-index="7720" class="highlight4"> whereby  a  golf  swing  is  </span></span><a id="I_indexterm8_id337211" class="indexterm"></a><a id="I_indexterm8_id337221" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7723</span><span sentence-index="7723" class="highlight2">simulated  in  order  to  determine  club  head  velocity  at  the  time  of  club-ball            impact. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7724</span><span sentence-index="7724" class="highlight3">  In  this  case,  given  specific  initial  parameters,  we  can  solve  the  swing  quickly,            almost  instantaneously,  to  determine  the  club  speed,  which  can  then  be  used  as  an  initial            condition  for  the  ball  flight. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7725</span><span sentence-index="7725" class="highlight4">  The  ball&apos;s  flight  can  be  solved  quickly  as  well  and  not            necessarily  in  real  time. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7726</span><span sentence-index="7726" class="highlight2">  It  really  depends  on  how  you  want  to  present  the  result  to  the            player. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7727</span><span sentence-index="7727" class="highlight3">  If  your  game  involves  following  the  flight  of  the  ball  as  it  soars  through  the  air,            then  you  might  want  to  simulate  its  flight  in  real  time  so  you  can  realistically  move  the  ball            and  camera. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7728</span><span sentence-index="7728" class="highlight4">  If,  however,  you  simply  want  to  show  where  the  ball  ends  up,  then  you  need  not            perform  the  simulation  in  real  time. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7729</span><span sentence-index="7729" class="highlight2">  For  such  a  simple  problem,  you  can  solve  for  the  final            ball  location  quicker  than  real  time. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7730</span><span sentence-index="7730" class="highlight3">  Sometimes,  the  action  you&apos;re  simulating  may  happen  so            fast  in  real  life  that  you&apos;ll  want  to  slow  it  down  for  your  game. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7731</span><span sentence-index="7731" class="highlight4">  Following  a  golf  ball&apos;s            flight  in  real  time  might  have  the  camera  moving  so  fast  that  your  player  won&apos;t  be  able  to            enjoy  the  beautifully  rendered  bird&apos;s-eye  view  of  the  course. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7732</span><span sentence-index="7732" class="highlight2">  In  this  case,  you  rapidly  solve            the  flight  path,  save  the  data,  and  then  animate  the  scene  at  a  more  enjoyable  pace  of  your            choosing.</span></span></a></p><p><a id="I_indexterm8_id337221" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7735</span><span sentence-index="7735" class="highlight3">We  don&apos;t  want  to  come  across  as  trying  to  talk  you  out  of  writing  a        physics  engine  if  you  so  choose. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7736</span><span sentence-index="7736" class="highlight4">  The  point  of  our  discussion  so  far  is        that  you  simply  don&apos;t  have  to  write  a  generic,  real-time  physics  engine  in        order  to  use  physics  in  your  games. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7737</span><span sentence-index="7737" class="highlight2">  You  have  other  options  as  we&apos;ve  just        explained.</span></span></a></p><p><a id="I_indexterm8_id337221" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7740</span><span sentence-index="7740" class="highlight3">Assuming  that,  after  all  these  considerations,  you  need  to  write  a        physics  engine,  then  we  have  the  following  to  offer.</span></span></a></p><p><a id="I_indexterm8_id337221" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">74</span><span sentence-index="7743" class="highlight4">A  physics  engine  is  just  one  component  of  a  </span></span></a><a id="I_indexterm8_id337258" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7744</span><span sentence-index="7744" class="highlight2">game  engine. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7745</span><span sentence-index="7745" class="highlight3">  The  other  components  include  the  graphics  engine,  audio  engine,  AI            engine,  and  whatever  other  engines  you  may  require  or  whatever  other  components  of  a  game  you            may  elevate  to  the  status  of  engine. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7746</span><span sentence-index="7746" class="highlight4">  Whatever  the  case,  the  physics  engine  handles  the            physics. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7747</span><span sentence-index="7747" class="highlight2">  Depending  on  whom  you  talk  to,  you&apos;ll  get  different  ideas  on  what  composes  a  physics            engine. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7748</span><span sentence-index="7748" class="highlight3">  Some  will  say  that  the  heart  of  the  physics  engine  is  the  collision  detection  module. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7749</span><span sentence-index="7749" class="highlight4">            Well,  what  if  your  game  doesn&apos;t  require  collision  detection,  yet  it  still  uses  physics  to            simulate  certain  behaviors  or  features? </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7750</span><span sentence-index="7750" class="highlight2">  Then  collision  detection  certainly  cannot  be  the  heart            of  your  physics  engine. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7751</span><span sentence-index="7751" class="highlight3">  Some  programmers  will  certainly  take  issue  with  these  statements. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">83</span><span sentence-index="7752" class="highlight4"> To            them,  a  physics  engine  simulates  rigid-body  motion  using  Newtonian  dynamics  while  taking  care            of  </span></span></a><a id="I_indexterm8_id337273" class="indexterm"></a><a id="I_indexterm8_id337283" class="indexterm"></a><a id="I_indexterm8_id337292" class="indexterm"></a><a id="I_indexterm8_id337302" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7756</span><span sentence-index="7756" class="highlight2">collision  detection  and  response. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7757</span><span sentence-index="7757" class="highlight3">  To  us,  a  significant  component  of  a  physics            engine  is  the  model&#x2014;that  is,  the  idealization  of  the  thing  you&apos;re  trying  to  simulate  in  a            realistic  manner. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7758</span><span sentence-index="7758" class="highlight4">  You  cannot  realistically  simulate  the  flight  characteristics  of  a  specific            aircraft  by  treating  it  as  a  generic  rigid  body. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7759</span><span sentence-index="7759" class="highlight2">  You  have  to  develop  a  representative  model  of            that  aircraft  including  very  specific  features;  otherwise,  it&apos;s  a  hack  (which,  by  the  way,  we            recognize  as  a  valid  and  long-established  approach).</span></span></a></p><p><a id="I_indexterm8_id337302" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">93</span><span sentence-index="7762" class="highlight3">Earlier,  in  </span></span></a><a class="xref" href="ch07.html" title="Chapter&#xA0;7.&#xA0;Real-Time Simulations"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">94</span><span sentence-index="7763" class="highlight4">Chapter&#xA0;7</span></span></a><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">94</span><span sentence-index="7763" class="highlight2"> and  </span></span><a class="xref" href="ch13.html" title="Chapter&#xA0;13.&#xA0;Connecting Objects"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">96</span><span sentence-index="7765" class="highlight3">Chapter&#xA0;13</span></span></a><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">96</span><span sentence-index="7765" class="highlight4">,  we  showed  you  several  example  </span></span><a id="I_indexterm8_id337331" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7766</span><span sentence-index="7766" class="highlight2">simulations. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7767</span><span sentence-index="7767" class="highlight3">  While  simple,  these  examples  include  many  of  the  required  components            of  a  generic  physics  engine. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7768</span><span sentence-index="7768" class="highlight4">  There  are  the  particle  and  rigid-body  classes  that  encapsulate            generic  object  properties  and  behaviors,  physics  models  that  govern  object  behaviors,            collision  detection  and  response  systems,  and  a  numerical  integrator. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7769</span><span sentence-index="7769" class="highlight2">  Additionally,  those            examples  include  interfacing  the  physics  code  with  user  input  and  visual  feedback. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7770</span><span sentence-index="7770" class="highlight3">  These            examples  also  show  the  basic  flow  from  user  input  to  physics  solver  to  visual  feedback.</span></span></a></p><p><a id="I_indexterm8_id337331" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">104</span><span sentence-index="7773" class="highlight4">In  summary,  the  major  components  of  a  generic  physics  engine        </span></span></a><a id="I_indexterm8_id337350" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">105</span><span sentence-index="7774" class="highlight2">include:</span></span></a></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><a id="I_indexterm8_id337350" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">108</span><span sentence-index="7777" class="highlight3">Physics  models</span></span></a></p></li><li class="listitem"><p><a id="I_indexterm8_id337350" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">110</span><span sentence-index="7779" class="highlight4">Simulated  objects  manager</span></span></a></p></li><li class="listitem"><p><a id="I_indexterm8_id337350" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">112</span><span sentence-index="7781" class="highlight2 nonQuoteStr">Collision  detection  engine  or  interface  thereto</span></span></a></p></li><li class="listitem"><p><a id="I_indexterm8_id337350" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">114</span><span sentence-index="7783" class="highlight3 nonQuoteStr">Collision  response  module</span></span></a></p></li><li class="listitem"><p><a id="I_indexterm8_id337350" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">116</span><span sentence-index="7785" class="highlight4">Force  effectors</span></span></a></p></li><li class="listitem"><p><a id="I_indexterm8_id337350" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">118</span><span sentence-index="7787" class="highlight2">Numerical  integrator</span></span></a></p></li><li class="listitem"><p><a id="I_indexterm8_id337350" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">120</span><span sentence-index="7789" class="highlight3">Game  engine  interface</span></span></a></p></li></ul></div><div class="sect2" title="Physics Models"><div class="titlepage"><div><div><h3 class="title" id="physics_models"><a id="I_indexterm8_id337350" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">122</span><span sentence-index="7791" class="highlight4">Physics  Models</span></span></a></h3></div></div></div><p><a id="I_indexterm8_id337350" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">124</span><span sentence-index="7793" class="highlight2">Physics  models  are  </span></span></a><a id="I_indexterm8_id337432" class="indexterm"></a><a id="I_indexterm8_id337442" class="indexterm"></a><a id="I_indexterm8_id337452" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7796</span><span sentence-index="7796" class="highlight3">the  idealizations  of  the  things  you&apos;re  simulating. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7797</span><span sentence-index="7797" class="highlight4">  If  your  physics  engine  is  a                generic  rigid-body  simulator  used  to  simulate  an  assortment  of  solid  objects  your  players                can  knock  around,  throw,  shoot,  and  generally  interact  with  in  a  basic  manner,  then  the                physics  model  will  probably  be  very  generic. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7798</span><span sentence-index="7798" class="highlight2">  It&apos;s  probably  safe  to  assume  that  each  object                will  be  subject  to  gravity&apos;s  pull,  thus  mass  will  be  an  important  attribute. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7799</span><span sentence-index="7799" class="highlight3">  Size  will  also                be  important,  not  only  because  you&apos;ll  need  to  know  how  big  things  are  when  checking  for                collisions  and  handling  other  interactions,  but  also  because  size  is  related  to  the                distribution  of  the  object&apos;s  mass. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">131</span><span sentence-index="7800" class="highlight4"> More  precisely,  each  object  will  </span></span></a><a id="I_indexterm8_id337466" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">132</span><span sentence-index="7801" class="highlight2">have  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">132</span><span sentence-index="7801" class="highlight3">mass  moment  of  inertia</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7802</span><span sentence-index="7802" class="highlight4">  attributes. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">134</span><span sentence-index="7803" class="highlight2"> The  objects  will                most  likely  also  have  some  ascribed  </span></span></a><a id="I_indexterm8_id337480" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7804</span><span sentence-index="7804" class="highlight3">coefficient  of  restitution  that  will  be  used  during  collision  response  handling. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">136</span><span sentence-index="7805" class="highlight4">               Additionally,  you  might  ascribe  some  friction  coefficients  </span></span></a><a id="I_indexterm8_id337493" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7806</span><span sentence-index="7806" class="highlight2">that  may  be  used  during  collision  response  or  in  situations  where  the  objects                may  slide  along  a  floor. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">138</span><span sentence-index="7807" class="highlight3"> As  the  objects  will  likely  find  themselves  airborne  at  some  point,                you&apos;ll  probably  also  include  a  drag  coefficient  </span></span></a><a id="I_indexterm8_id337503" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7808</span><span sentence-index="7808" class="highlight4">for  each  object. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7809</span><span sentence-index="7809" class="highlight2">  All  of  these  parameters  will  help  you  differentiate  massive                objects  from  lighter  ones  or  compact  objects  from  voluminous  ones.</span></span></a></p><p><a id="I_indexterm8_id337503" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7812</span><span sentence-index="7812" class="highlight3">If  your  simulation  involves  more  than  generic  rigid  bodies,  then            your  physics  will  be  more  specific  and  perhaps  far  more  elaborate. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7813</span><span sentence-index="7813" class="highlight4">  A            great  example  of  a  more  complicated  model  is  flight  simulation. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7814</span><span sentence-index="7814" class="highlight2">  No            matter  how  good  your  generic  rigid-body  model,  it  won&apos;t  fly  like  any            specific  aircraft  if  it  flies  at  all. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7815</span><span sentence-index="7815" class="highlight3">  You  must  develop  a  model  that            captures  flight  aerodynamics  specific  to  the  aircraft  you&apos;re  simulating. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">147</span><span sentence-index="7816" class="highlight4">           </span></span></a><a class="xref" href="ch15.html" title="Chapter&#xA0;15.&#xA0;Aircraft"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">148</span><span sentence-index="7817" class="highlight2">Chapter&#xA0;15</span></span></a><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7818</span><span sentence-index="7818" class="highlight3">  shows  how  to  put  together  a  model  for  an            aircraft  that  can  be  used  in  a  real-time  flight  simulation.</span></span></p><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7820</span><span sentence-index="7820" class="highlight4">The  other  chapters  in  Part  IV  of  this  book  are  meant  to  give  you  a            taste  of  modeling  aspects  for  a  variety  of  things  you  might  simulate  in            a  game. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7821</span><span sentence-index="7821" class="highlight2">  Just  as  you  cannot  simulate  an  aircraft  with  a  generic            rigid-body  model,  you  cannot  simulate  a  ship  with  an  aircraft  model,  nor            can  you  simulate  a  golf  ball  with  a  ship  model. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7822</span><span sentence-index="7822" class="highlight3">  The  point  is  that  you            must  spend  some  time  designing  your  physics  model  specific  to  what            you&apos;re  going  to  simulate  in  your  game. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7823</span><span sentence-index="7823" class="highlight4">  Time  spent  here  is  just  as            important  to  creating  a  realistic  physics  engine  as  time  spent  on            designing  a  robust  integration  scheme  or  collision  detection  system. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7824</span><span sentence-index="7824" class="highlight2">  We            can&apos;t  overstate  the  importance  of  the  physical  model. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7825</span><span sentence-index="7825" class="highlight3">  The  model  is  what            defines  the  behavior  of  the  thing  you&apos;re  simulating.</span></span></p></div><div class="sect2" title="Simulated Objects Manager"><div class="titlepage"><div><div><h3 class="title" id="simulated_objects_manager"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">158</span><span sentence-index="7827" class="highlight4">Simulated  Objects  Manager</span></span></h3></div></div></div><p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">159</span><span sentence-index="7828" class="highlight2">Your  simulated  objects  manager  will  be  </span></span><a id="I_indexterm8_id337552" class="indexterm"></a><a id="I_indexterm8_id337562" class="indexterm"></a><a id="I_indexterm8_id337568" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7831</span><span sentence-index="7831" class="highlight3">responsible  for  instantiating,  initializing,  and  disposing            of  objects. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7832</span><span sentence-index="7832" class="highlight4">  It  will  also  be  responsible  for  maintaining  links  between            object  physics  and  other  attributes  such  as  geometry,  for  example,  if  in            a  3D  simulation  you  use  the  same  polyhedron  to  render  an  object  and  for            collision  detection  and  response.</span></span></a></p><p><a id="I_indexterm8_id337568" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7835</span><span sentence-index="7835" class="highlight2">You  must  have  some  means  of  managing  the  objects  in  your  simulation. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7836</span><span sentence-index="7836" class="highlight3">  One  can  imagine                many  different  approaches  to  managing  these  objects,  and  unless  your  simulation  uses  just  a                handful  of  objects  or  fewer,  essentially  what  you  need  is  a  list  of  objects  of  whatever                class  you&apos;ve  defined. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">168</span><span sentence-index="7837" class="highlight4"> You&apos;ve  seen  in  previous  chapters&apos;  examples  where  we  use  simple  arrays                of  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">168</span><span sentence-index="7837" class="highlight2">RigidBody</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">168</span><span sentence-index="7837" class="highlight3"> type  objects  or  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">168</span><span sentence-index="7837" class="highlight4">Particle</span></span></code><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7837</span><span sentence-index="7837" class="highlight2">  type  objects. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7838</span><span sentence-index="7838" class="highlight3">  If  all  the  objects  in  your  simulation  are  the  same,  then                you  need  only  a  single  class  capturing  all  their  behavior. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7839</span><span sentence-index="7839" class="highlight4">  However,  for  more  diversity,  you                should  use  a  list  of  various  classes  with  each  class  encapsulating  the  code  required  to                implement  its  own  physical  model. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7840</span><span sentence-index="7840" class="highlight2">  This  is  particularly  important  with  respect  to  the  forces                acting  on  the  model. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7841</span><span sentence-index="7841" class="highlight3">  For  example,  you  could  have  some  objects  representing  projectiles  with                others  representing  aircraft. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7842</span><span sentence-index="7842" class="highlight4">  These  different  classes  will  share  some  common  code  (for                example,  collision  detection);  however,  the  way  forces  are  computed  on  each  will  vary  due  to                the  differences  in  how  they  are  modeled. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7843</span><span sentence-index="7843" class="highlight2">  With  such  an  approach,  each  class  must  have  code                that  implements  its  particular  model. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7844</span><span sentence-index="7844" class="highlight3">  During  integration,  the  entire  list  will  be  traversed,                calling  the  force  aggregation  method  for  each  object,  and  the  particular  class  will  handle                the  details  suitable  for  the  type  of  object.</span></span></a></p><p><a id="I_indexterm8_id337568" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7847</span><span sentence-index="7847" class="highlight4">In  some  simple  cases,  you  need  not  use  different  object  classes  if            the  types  of  objects  you  plan  to  use  are  not  too  different. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7848</span><span sentence-index="7848" class="highlight2">  For  example,            it  would  be  fairly  straightforward  to  implement  a  single  class  capable            of  handling  both  particles  and  rigid  bodies. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7849</span><span sentence-index="7849" class="highlight3">  The  object  class  could            include  an  object  type  property  used  to  denote  whether  the  object  is  a            particle  or  a  rigid  body,  and  then  the  class  methods  would  call  the            appropriate  code. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7850</span><span sentence-index="7850" class="highlight4">  Again,  this  will  work  satisfactorily  for  simple            objects  with  few  differences. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7851</span><span sentence-index="7851" class="highlight2">  If  you  want  to  simulate  more  than  two            types  of  objects  or  if  they  are  very  different,  you&apos;re  probably  better            off  using  different  classes  specific  to  each  object  being            simulated.</span></span></a></p><p><a id="I_indexterm8_id337568" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7854</span><span sentence-index="7854" class="highlight3">However  you  structure  your  classes  or  lists,  the  flow  of            processing  your  objects  will  generally  be  the  same. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">186</span><span sentence-index="7855" class="highlight4"> Every  physics            </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">186</span><span sentence-index="7855" class="highlight2">tick</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7855</span><span sentence-index="7855" class="highlight3"> &#x2014;that  is,  every  time  step  in  the  physics            simulation&#x2014;you  must  check  for  object  collisions,  resolve  those            collisions,  aggregate  the  usual  forces  on  each  object,  integrate  the            equations  of  motion  for  each  object,  and  then  update  each  object&apos;s            state.</span></span></a></p><p><a id="I_indexterm8_id337568" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">189</span><span sentence-index="7858" class="highlight4">As  we  said,  this  is  the  general  flow  at  every  physics  tick,  or            time  step,  which  may  not  be  the  same  as  your  </span></span></a><a id="I_indexterm8_id337634" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7859</span><span sentence-index="7859" class="highlight2">rendering  steps. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7860</span><span sentence-index="7860" class="highlight3">  For  example,  for  accuracy  in  your            simulation  you  may  have  to  take  small  steps  around  a  millisecond  or  so. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7861</span><span sentence-index="7861" class="highlight4">            You  wouldn&apos;t  want  to  update  the  graphics  every  millisecond  when  you  need            only  about  a  third  as  many  graphics  updates  per  second. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7862</span><span sentence-index="7862" class="highlight2">  Thus,  your            objects  manager  will  have  to  be  integrated  with  your  overall  game            engine,  and  your  game  engine  must  be  responsible  for  making  sure  the            physics  and  graphics  are  updated  appropriately.</span></span></a></p></div><div class="sect2" title="Collision Detection"><div class="titlepage"><div><div><h3 class="title" id="collision_detection"><a id="I_indexterm8_id337634" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">196</span><span sentence-index="7865" class="highlight3 nonQuoteStr">Collision  Detection</span></span></a></h3></div></div></div><p><a id="I_indexterm8_id337634" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">198</span><span sentence-index="7867" class="highlight4">If  collisions  are  an  </span></span></a><a id="I_indexterm8_id337663" class="indexterm"></a><a id="I_indexterm8_id337673" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7869</span><span sentence-index="7869" class="highlight2">important  part  of  your  game,  then  a  robust  collision            detection  system  is  required.</span></span></a></p><p><a id="I_indexterm8_id337673" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7872</span><span sentence-index="7872" class="highlight3">Your  collision  detection  system  is  distinct  from  the  collision            response  system  or  module,  though  the  two  go  hand  in  hand. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">204</span><span sentence-index="7873" class="highlight4"> Collision            detection  </span></span></a><a id="I_indexterm8_id337690" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7874</span><span sentence-index="7874" class="highlight2">is  the  computational  geometry  problem  of  determining  if            objects  collide  and,  if  so,  what  points  are  making  contact. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">206</span><span sentence-index="7875" class="highlight3"> These  points            are  sometimes  called  </span></span></a><a id="I_indexterm8_id337702" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">207</span><span sentence-index="7876" class="highlight4">the  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">207</span><span sentence-index="7876" class="highlight2">contact  manifold</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7877</span><span sentence-index="7877" class="highlight3"> . </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7878</span><span sentence-index="7878" class="highlight4">  They&apos;re  just            the  points  that  are  touching,  which  could  be  a  line  or  surface,  though            for  simplicity  usually  the  point,  end  points,  or  points  defining  the            contact  surface  boundary  are  all  that  are  included  in  the  contact            manifold.</span></span></a></p><p><a id="I_indexterm8_id337702" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7881</span><span sentence-index="7881" class="highlight2">The  collision  detection  system&apos;s  role  is  very  specific:  determine            which  objects  are  colliding,  what  points  on  each  object  are  involved  in            the  collision,  and  the  velocities  of  those  points. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7882</span><span sentence-index="7882" class="highlight3">  It  sounds            straightforward,  but  actual  implementation  can  get  quite  complex. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">214</span><span sentence-index="7883" class="highlight4"> There            are  situations  where  fast-moving  objects  may  go  right  though  other            objects,  especially  thin  ones,  over  a  single  time  step,  making  the            </span></span></a><a id="I_indexterm8_id337724" class="indexterm"></a><a id="I_indexterm8_id337734" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7885</span><span sentence-index="7885" class="highlight2">collision  detection  system  miss  the  collision  if  it  relies            solely  on  checking  the  separation  distance  between  objects  and  their            relative  velocity  (i.e.,  it  detects  a  collision  if  the  objects  are            within  some  collision  tolerance  and  are  also  moving  toward  each  other). </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7886</span><span sentence-index="7886" class="highlight3">            A  robust  collision  detection  system  will  capture  this  situation  and            respond  accordingly. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">218</span><span sentence-index="7887" class="highlight4"> In  </span></span></a><a class="xref" href="ch08.html" title="Chapter&#xA0;8.&#xA0;Particles"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">219</span><span sentence-index="7888" class="highlight2">Chapter&#xA0;8</span></span></a><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7889</span><span sentence-index="7889" class="highlight3">  we  simply  check  if            particles  moved  past  the  ground  over  the  course  of  a  single  time  step,            for  example,  and  then  reset  their  position  to  that  of  the  ground  plane            level. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7890</span><span sentence-index="7890" class="highlight4">  We  can  handle  many  situations  using  such  simple  techniques,            especially  when  dealing  with  objects  passing  through  floors  or  walls;            however,  other  situations  may  require  more  complex  algorithms  to  predict            if  a  collision  will  occur  sometime  in  the  near  future  depending  on  how            fast  objects  are  moving  relative  to  each  other. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">222</span><span sentence-index="7891" class="highlight2"> This  latter  case  is            </span></span><a id="I_indexterm8_id337758" class="indexterm"></a><a id="I_indexterm8_id337764" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">224</span><span sentence-index="7893" class="highlight3">called  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">224</span><span sentence-index="7893" class="highlight4">continuous</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7893</span><span sentence-index="7893" class="highlight2">  collision            detection,  and  it  is  covered  in  many  Internet,  book,  and  technical  paper            sources. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7894</span><span sentence-index="7894" class="highlight3">  Many  commercial  and  open  source  physics  engines  advertise  their            capability  to  handle  continuous  collision  detection.</span></span></a></p><p><a id="I_indexterm8_id337764" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7897</span><span sentence-index="7897" class="highlight4">Another  challenge  associated  with  collision  detection  is  the  fact            that  it  can  be  very  time-consuming  if  you  have  a  large  or  even  moderate            number  of  objects  in  your  simulation. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7898</span><span sentence-index="7898" class="highlight2">  There  are  various  techniques  to            deal  with  this. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">230</span><span sentence-index="7899" class="highlight3"> First,  the  </span></span></a><a id="I_indexterm8_id337785" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7900</span><span sentence-index="7900" class="highlight4">game  space  is  partitioned  in  some  coarse  grid-like  manner,            and  this  grid  is  used  to  organize  objects  depending  on  which  cell  they            occupy. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">232</span><span sentence-index="7901" class="highlight2"> Then,  in  the  second  phase  of  collision  detection,  only  those            </span></span></a><a id="I_indexterm8_id337794" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7902</span><span sentence-index="7902" class="highlight3">objects  occupying  adjacent  cells  are  checked  against  each            other  to  see  if  they  are  colliding. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7903</span><span sentence-index="7903" class="highlight4">  Without  this  grid  partitioning,            pairwise  checks  of  every  object  against  every  other  object  would  be  very            computationally  expensive. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">235</span><span sentence-index="7904" class="highlight2"> The  second  phase  of  collision  detection  is            often  a  broad  approach  using  </span></span></a><a id="I_indexterm8_id337808" class="indexterm"></a><a id="I_indexterm8_id337814" class="indexterm"></a><a id="I_indexterm8_id337824" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7907</span><span sentence-index="7907" class="highlight3">bounding  spheres  or  bounding  boxes,  which  may  be  axis-  or            body-aligned. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7908</span><span sentence-index="7908" class="highlight4">  If  the  bounding  spheres  or  boxes  of  each  object  are  found            to  collide,  then  the  objects  likewise  may  be  colliding  and  further            checks  will  be  required;  otherwise,  we  can  infer  that  the  objects  are            not  colliding. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7909</span><span sentence-index="7909" class="highlight2">  In  the  case  of  a  potential  collision,  these  further            checks  become  more  complex  depending  on  the  geometry  of  the  objects. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7910</span><span sentence-index="7910" class="highlight3">            This  phase  generally  involves  polygon-  and  vertex-level  checks;  there            are  well-established  techniques  for  performing  such  checks  that  we  won&apos;t            get  into  here. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7911</span><span sentence-index="7911" class="highlight4">  Again,  there&apos;s  a  wealth  of  literature  on  collision            detection  available  online.</span></span></a></p></div><div class="sect2" title="Collision Response"><div class="titlepage"><div><div><h3 class="title" id="collision_response"><a id="I_indexterm8_id337824" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">245</span><span sentence-index="7914" class="highlight2 nonQuoteStr">Collision  Response</span></span></a></h3></div></div></div><p><a id="I_indexterm8_id337824" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">247</span><span sentence-index="7916" class="highlight3">Once  the  collision  </span></span></a><a id="I_indexterm8_id337849" class="indexterm"></a><a id="I_indexterm8_id337860" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7918</span><span sentence-index="7918" class="highlight4">detection  system  does  its  job,  it&apos;s  time  for  the  collision            response  system  to  deal  with  the  colliding  objects. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">250</span><span sentence-index="7919" class="highlight2"> Earlier  in  this            book,  we  showed  you  how  to  implement  an  </span></span></a><a id="I_indexterm8_id337872" class="indexterm"></a><a id="I_indexterm8_id337879" class="indexterm"></a><a id="I_indexterm8_id337889" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7922</span><span sentence-index="7922" class="highlight3">impulse-moment  collision  response  method. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7923</span><span sentence-index="7923" class="highlight4">  Recall  that  this            method  assumes  that  at  the  instant  of  collision,  the  most  significant            forces  acting  on  the  objects  are  the  collision  forces,  so  all  other            forces  can  be  ignored  for  that  instant. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7924</span><span sentence-index="7924" class="highlight2">  The  method  then  computes  the            resulting  velocities  of  the  objects  after  colliding  and  instantly            changes  their  velocities  accordingly. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7925</span><span sentence-index="7925" class="highlight3">  To  perform  the  required            calculations,  the  collision  response  system  requires  the  objects            colliding,  of  course,  the  collision  points,  and  the  velocities  of  those            points. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">257</span><span sentence-index="7926" class="highlight4"> Also,  each  object  must  have  some  associated  mass  and  </span></span></a><a id="I_indexterm8_id337905" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7927</span><span sentence-index="7927" class="highlight2">coefficient  of  restitution,  which  are  likewise  used  to            compute  the  resulting  velocities  of  the  objects  after  the            collision.</span></span></a></p><p><a id="I_indexterm8_id337905" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">261</span><span sentence-index="7930" class="highlight3">In  practice,  the  collision  response  system  works  </span></span></a><a id="I_indexterm8_id337921" class="indexterm"></a><a id="I_indexterm8_id337931" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7932</span><span sentence-index="7932" class="highlight4">hand  in  hand  with  the  collision  detection  system,            particularly  when  dealing  with  objects  that  may  be  penetrating  each            other. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">264</span><span sentence-index="7933" class="highlight2"> As  we  mentioned  earlier,  in  many  cases  an  object  </span></span></a><a id="I_indexterm8_id337944" class="indexterm"></a><a id="I_indexterm8_id337950" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7935</span><span sentence-index="7935" class="highlight3">penetrating  another,  such  as  an  object  penetrating  a  wall            or  floor,  can  simply  be  moved  so  that  it  is  just  touching  the  wall  or            floor. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7936</span><span sentence-index="7936" class="highlight4">  Other  cases  may  be  more  complicated,  and  iterative  algorithms  are            used  to  resolve  the  penetration. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7937</span><span sentence-index="7937" class="highlight2">  For  example,  if  penetration  is            detected,  then  the  simulation  may  back  up  to  the  previous  time  step  and            take  a  short  time  step  to  see  if  penetration  still  occurs. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7938</span><span sentence-index="7938" class="highlight3">  If  it  does            not,  the  simulation  proceeds;  otherwise,  the  simulation  takes  an  even            smaller  time  step. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7939</span><span sentence-index="7939" class="highlight4">  This  process  repeats  until  penetration  does  not            occur. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7940</span><span sentence-index="7940" class="highlight2">  This  works  fine  in  many  cases;  however,  sometimes  the  penetration            is  never  resolved  and  the  simulation  could  get  stuck  taking  smaller  and            smaller  time  steps. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">272</span><span sentence-index="7941" class="highlight3"> This  failure  to  resolve  could  be  attributed  to            objects  that  are  just  outside  the  collision  distance  tolerance  at  one            instant,  and  due  to  numerical  errors,  exceedingly  small  time  steps  are            required  to  stay  outside  of  the  </span></span></a><a id="I_indexterm8_id337969" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7942</span><span sentence-index="7942" class="highlight4">distance  tolerance. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7943</span><span sentence-index="7943" class="highlight2">  Some  programmers  simply  put  an            iteration  limit  in  the  code  to  prevent  the  simulation  from  getting            stuck,  but  the  consequences  in  every  situation  may  be  unpredictable. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7944</span><span sentence-index="7944" class="highlight3">  The            continuous  collision  detection  approach  we  mentioned  earlier  avoids  this            sort  of  problem  by  predicting  the  future  collision  or  penetration  and            dealing  with  it  ahead  of  time. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7945</span><span sentence-index="7945" class="highlight4">  Whatever  the  approach,  there  will  be  some            back  and  forth  and  data  exchange  between  your  collision  detection  and            response  systems  to  avoid  excessive  penetration  situations.</span></span></a></p><p><a id="I_indexterm8_id337969" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7948</span><span sentence-index="7948" class="highlight2">Additionally,  there  are  situations  when  an  object  may  come  to  rest            in  contact  with  another&#x2014;for  example,  a  box  resting  on  the  floor. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">280</span><span sentence-index="7949" class="highlight3"> There            are  many  ways  to  deal  with  such  </span></span></a><a id="I_indexterm8_id337988" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7950</span><span sentence-index="7950" class="highlight4">contact  situations,  one  of  which  is  to  just  allow  the            impulse-momentum  approach  to  deal  with  it. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7951</span><span sentence-index="7951" class="highlight2">  This  works  just  fine  in  many            cases;  however,  sometimes  the  objects  in  resting  contact  will  jitter            with  the  impulse-momentum  approach. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">283</span><span sentence-index="7952" class="highlight3"> One  resolution  to  this  jittering            problem  is  to  put  those  </span></span></a><a id="I_indexterm8_id338002" class="indexterm"></a><a id="I_indexterm8_id338012" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7954</span><span sentence-index="7954" class="highlight4">objects  to  sleep&#x2014;that  is,  if  they  are  found  to  be            colliding,  but  their  relative  velocities  are  smaller  than  some            tolerance,  they  are  put  to  sleep. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7955</span><span sentence-index="7955" class="highlight2">  A  related  but  somewhat  more            complicated  approach  is  to  compute  the  contact  normal  between  the  object            and  the  floor  and  set  that  velocity  to  0. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7956</span><span sentence-index="7956" class="highlight3">  This  serves  as  a  constraint,            preventing  the  object  from  penetrating  the  floor  while  still  allowing  it            to  slide  along  the  floor.</span></span></a></p></div><div class="sect2" title="Force Effectors"><div class="titlepage"><div><div><h3 class="title" id="force_effectors"><a id="I_indexterm8_id338012" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">290</span><span sentence-index="7959" class="highlight4">Force  Effectors</span></span></a></h3></div></div></div><p><a id="I_indexterm8_id338012" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">292</span><span sentence-index="7961" class="highlight2">Force  effectors  </span></span></a><a id="I_indexterm8_id338037" class="indexterm"></a><a id="I_indexterm8_id338047" class="indexterm"></a><a id="I_indexterm8_id338053" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7964</span><span sentence-index="7964" class="highlight3">apply  direct  or  indirect  force  on  the  objects  in  your            simulations. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7965</span><span sentence-index="7965" class="highlight4">  Your  physics  engine  may  include  several. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7966</span><span sentence-index="7966" class="highlight2">  For  example,  if            your  engine  allows  users  to  move  objects  around  with  the  mouse,  then            you&apos;ll  need  some  virtualization  of  the  force  applied  by  the  user  via  the            mouse  or  a  finger  on  a  touch  screen. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7967</span><span sentence-index="7967" class="highlight3">  This  is  an  example  of  a  direct            force. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">299</span><span sentence-index="7968" class="highlight4"> Another  </span></span></a><a id="I_indexterm8_id338068" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7969</span><span sentence-index="7969" class="highlight2">direct  force  effector  could  be  a  virtual  jet  engine. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7970</span><span sentence-index="7970" class="highlight3">  If            you  associate  that  virtual  engine,  which  produces  some  thrust  force,            with  some  object,  then  the  associated  object  will  behave  as  though  it            were  pushed  around  by  the  jet.</span></span></a></p><p><a id="I_indexterm8_id338068" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">304</span><span sentence-index="7973" class="highlight4">Some  examples  of  indirect  force  effectors</span></span></a><a id="I_indexterm8_id338081" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7974</span><span sentence-index="7974" class="highlight2">  include  gravity  and  wind. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">306</span><span sentence-index="7975" class="highlight3"> </span></span></a><a id="I_indexterm8_id338089" class="indexterm"></a><a id="I_indexterm8_id338101" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7977</span><span sentence-index="7977" class="highlight4">Gravity  applies  force  on  objects  by  virtue  of  their  mass,            but  it  is  typically  modeled  as  body  acceleration  and  not  an  explicit            force. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7978</span><span sentence-index="7978" class="highlight2">  Wind  can  be  viewed  as  exerting  a  pressure  force  on  an  object,  and            that  force  will  be  a  function  of  the  object&apos;s  size  and  drag            coefficients.</span></span></a></p><p><a id="I_indexterm8_id338101" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7981</span><span sentence-index="7981" class="highlight3">You  can  imagine  all  sorts  of  force  effectors,  from  ones  similar  to            those  just  described  to  perhaps  some  otherworldly  ones. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7982</span><span sentence-index="7982" class="highlight4">  Whatever  you            imagine,  you  must  remember  that  a  force  has  magnitude,  direction,  and            some  central  point  of  application. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7983</span><span sentence-index="7983" class="highlight2">  If  you  put  a  jet  engine  on  the  side            of  a  box,  the  box  will  not  only  translate  but  will  spin  as  well. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">315</span><span sentence-index="7984" class="highlight3"> Wind            creates  a  force  that  has  a</span></span></a><a id="I_indexterm8_id338124" class="indexterm"></a><a id="I_indexterm8_id338130" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7986</span><span sentence-index="7986" class="highlight4">  center  of  pressure,  which  is  the  point  through  which  you            can  assume  the  total  wind  force  acts. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7987</span><span sentence-index="7987" class="highlight2">  The  direction  of  the  force  and            point  of  application  are  important  for  capturing  both  translation  and            rotation. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">319</span><span sentence-index="7988" class="highlight3"> As  an  example,  consider  the  </span></span></a><a id="I_indexterm8_id338143" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">320</span><span sentence-index="7989" class="highlight4">hovercraft  we  modeled  in  </span></span></a><a class="xref" href="ch09.html" title="Chapter&#xA0;9.&#xA0;2D Rigid-Body Simulator"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">322</span><span sentence-index="7991" class="highlight2">Chapter&#xA0;9</span></span></a><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7991</span><span sentence-index="7991" class="highlight3">  that  included  two  bow  thrusters  for            steering  and  a  propeller  for  forward  motion. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7992</span><span sentence-index="7992" class="highlight4">  Each  of  these  direct  force            effectors&#x2014;the  bow  thrusters  and  the  propeller&#x2014;is  applied  at  specific            locations  on  the  hovercraft. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7993</span><span sentence-index="7993" class="highlight2">  The  bow  thrusters  are  located  toward  the            bow  and  point  sideways  in  order  to  create  spin,  thus  allowing  some            steering. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7994</span><span sentence-index="7994" class="highlight3">  The  propeller  is  located  on  the  center  line  of  the  hovercraft,            which  passes  through  the  hovercraft&apos;s  center  of  gravity  so  that  it  does            not  create  spin  and  instead  simply  pushes  the  craft  forward. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">326</span><span sentence-index="7995" class="highlight4"> There&apos;s            another  force  effector  in  </span></span><a id="I_indexterm8_id338164" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7996</span><span sentence-index="7996" class="highlight2">that  model&#x2014;aerodynamic  drag,  which  is  an  indirect  force            effector. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">7997</span><span sentence-index="7997" class="highlight3">  The  drag  force  is  applied  at  a  point  aft  of  the  center  of            gravity  so  that  it  creates  some  torque,  or  moment,  which  in  this  model            helps  keep  the  hovercraft  pointed  straight;  it  provides  some  directional            stability.</span></span></a></p><p><a id="I_indexterm8_id338164" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8000</span><span sentence-index="8000" class="highlight4">Whatever  force  effectors  you  contrive,  they  all  must  be  aggregated            for  each  object  and  dealt  with  in  your  numerical  integrator. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8001</span><span sentence-index="8001" class="highlight2">  Thus,  your            integrator  must  have  some  means  of  accessing  all  the  force  effector            information  required  to  accurately  simulate  their  effect  on  each            associated  object.</span></span></a></p></div><div class="sect2" title="Numerical Integrator"><div class="titlepage"><div><div><h3 class="title" id="numerical_integrator"><a id="I_indexterm8_id338164" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">335</span><span sentence-index="8004" class="highlight3">Numerical  Integrator</span></span></a></h3></div></div></div><p><a id="I_indexterm8_id338164" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">337</span><span sentence-index="8006" class="highlight4">The  integrator  is  responsible  </span></span></a><a id="I_indexterm8_id338197" class="indexterm"></a><a id="I_indexterm8_id338208" class="indexterm"></a><a id="I_indexterm8_id338214" class="indexterm"></a><a id="I_indexterm8_id338225" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8010</span><span sentence-index="8010" class="highlight2">for  solving  the  equations  of  motion  for  each  object. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">342</span><span sentence-index="8011" class="highlight3"> We            showed  you  how  to  do  this  earlier,  in  </span></span></a><a class="xref" href="ch07.html" title="Chapter&#xA0;7.&#xA0;Real-Time Simulations"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">343</span><span sentence-index="8012" class="highlight4">Chapter&#xA0;7</span></span></a><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">343</span><span sentence-index="8012" class="highlight2"> through  </span></span><a class="xref" href="ch13.html" title="Chapter&#xA0;13.&#xA0;Connecting Objects"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">345</span><span sentence-index="8014" class="highlight3">Chapter&#xA0;13</span></span></a><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8014</span><span sentence-index="8014" class="highlight4"> . </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8015</span><span sentence-index="8015" class="highlight2">  In  your  generic  physics  engine  you&apos;ll            iterate  through  all  the  objects  in  the  simulation  to  compute  their  new            velocities,  positions,  and  orientations  at  every  time  step. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8016</span><span sentence-index="8016" class="highlight3">  To  make            these  calculations,  your  integrator  must  have  access  to  the  force            effectors  associated  with  each  object. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8017</span><span sentence-index="8017" class="highlight4">  The  forces  will  be  used  to            compute  accelerations,  which  will  then  be  integrated  to  compute            velocities,  and  those  in  turn  will  be  used  to  compute  positions  and            orientations.</span></span></p><p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">350</span><span sentence-index="8019" class="highlight2">You  can  handle  aggregating  the  </span></span><a id="I_indexterm8_id338253" class="indexterm"><span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8020</span><span sentence-index="8020" class="highlight3">forces  in  a  few  ways. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8021</span><span sentence-index="8021" class="highlight4">  You  could  aggregate  all  the  forces  on  all  objects  prior  to                looping  through  the  objects  integrating  the  equations  of  motion,  but  this  would  require                looping  through  all  the  objects  twice. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">353</span><span sentence-index="8022" class="highlight2"> Alternatively,  since  you&apos;re  looping  through  the                object  list  in  order  to  integrate  each  object&apos;s  equations  of  motion,  you  can  simply                aggregate  each  </span></span></a><a id="I_indexterm8_id338268" class="indexterm"><span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8023</span><span sentence-index="8023" class="highlight3">object&apos;s  forces  during  the  integration  step. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8024</span><span sentence-index="8024" class="highlight4">  A  complication  arises  when  object                pairs  apply  forces  to  each  other. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8025</span><span sentence-index="8025" class="highlight2">  A  linear  spring  and  damper,  for  example,  connected  between                two  objects,  apply  equal  and  opposite  forces  to  each  object. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8026</span><span sentence-index="8026" class="highlight3">  The  force  is  a  function  of  the                relative  distance  between  the  objects  (the  spring  component)  and  their  relative  velocity                (the  damping  component). </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8027</span><span sentence-index="8027" class="highlight4">  So,  if  during  a  given  time  step  you  aggregate  the  forces  on  one  of                the  objects  in  the  pair,  the  resulting  force  will  be  a  function  of  the  current  relative                position  and  velocities  of  the  objects. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8028</span><span sentence-index="8028" class="highlight2">  Integrating  that  object  will  give  it  a  new  position                and  velocity. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8029</span><span sentence-index="8029" class="highlight3">  Then,  when  you  get  to  the  other  object  in  the  pair,  if  you  recomputed  the                spring  force,  it  will  be  a  function  of  the  new  relative  position  and  velocity  between  the                objects  that  includes  the  new  displacement  and  velocity  of  the  previously  updated  object  but                the  old  displacement  and  velocity  of  the  current  object. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">361</span><span sentence-index="8030" class="highlight4"> This  is  inconsistent  with  Newton&apos;s                law  of  </span></span></a><a id="I_indexterm8_id338288" class="indexterm"></a><a id="I_indexterm8_id338298" class="indexterm"></a><a id="I_indexterm8_id338308" class="indexterm"><span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8033</span><span sentence-index="8033" class="highlight2">equal  and  opposite  forces. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">8034</span><span sentence-index="8034" class="highlight3">  You  can  resolve  this  problem  by  storing  the  force                computed  for  the  first  object  and  applying  it  to  the  second  one  without  recomputing  the                spring  force  for  the  second  object.</span></span></a></p></div></div></section><a id="I_indexterm8_id338308" class="indexterm">
</a></body></html>