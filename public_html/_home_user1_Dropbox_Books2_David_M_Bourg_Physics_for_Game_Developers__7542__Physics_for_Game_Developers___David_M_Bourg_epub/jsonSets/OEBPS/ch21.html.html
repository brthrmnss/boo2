<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><html><head><title>Chapter&#xA0;21.&#xA0;Accelerometers</title><link rel="stylesheet" type="text/css" href="core.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="up" href="pt04.html" title="Part&#xA0;IV.&#xA0;Digital Physics"><link rel="prev" href="ch20.html" title="Chapter&#xA0;20.&#xA0;Touch Screens"><link rel="next" href="ch22.html" title="Chapter&#xA0;22.&#xA0;Gaming from One Place to Another"></head><body>
         
        <script>
        function ok(){ 
            window.gggs()
            return;
            //$('#musicPlayer').parent().remove();
            //speakTransportPanelDialogV2.closeEmoteDialog()
            //speakTransportPanelDialog.closeEmoteDialog()
            //
            debugger
            let url = 'http://127.0.0.1:8080/uploads/extracted/' +
             'Crazy Rich Asians  Kevin Kwanepub/' +
              'jsonSets/OEBPS/Kwan_9780385536981_epub_prl_r1.htm.html.sentences.json'
            speakTransportPanelDialogV2.sideLoadSentences2(null, null, null, url)
            
        }
        setTimeout(ok, 1500)
        </script>
        <div style="background:white">````````</div><section class="chapter" title="Chapter&#xA0;21.&#xA0;Accelerometers" epub:type="chapter" id="accelerometers"><div class="titlepage"><div><div><h2 class="title"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">1</span><span sentence-index="11408" class="">Chapter&#xA0;21.&#xA0;Accelerometers</span></span></h2></div></div></div><p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">2</span><span sentence-index="11409" class="">Accelerometers  are  a  </span></span><a id="ac21.0" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">3</span><span sentence-index="11410" class="">good  introduction  to  a  class  of  electronic  </span></span></a><a id="mi21.0" class="indexterm"></a><a id="me21.0" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">6</span><span sentence-index="11413" class="">components  called  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">6</span><span sentence-index="11413" class="">microelectromechanical  systems</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11413</span><span sentence-index="11413" class="">  (MEMS). </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11414</span><span sentence-index="11414" class="">  An        accelerometer  can  either  be  one-axis,  two-axis,  or  three-axis. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11415</span><span sentence-index="11415" class="">  This  designates  how  many        different  directions  it  can  simultaneously  measure  acceleration. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11416</span><span sentence-index="11416" class="">  Most  gaming  devices  have        three-axis  accelerometers.</span></span></a></p><p><a id="me21.0" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">12</span><span sentence-index="11419" class="">As  far  as  game  development  is  concerned,  acceleration  values  are  typically  delivered  to  your        program  via  an  API  with  units  in  multiples  of  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">12</span><span sentence-index="11419" class="">g</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11419</span><span sentence-index="11419" class=""> . </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">13</span><span sentence-index="11420" class=""> One  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">13</span><span sentence-index="11420" class="">g</span></span></em></span><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">13</span><span sentence-index="11420" class="">       is  equal  to  the  acceleration  caused  by  gravity  on  the  Earth,  or  9.8            m/s</span></span><sup><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">13</span><span sentence-index="11420" class="">2</span></span></sup><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11420</span><span sentence-index="11420" class=""> . </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11421</span><span sentence-index="11421" class="">  Let&apos;s  pretend  that  we  have  a  one-axis  accelerometer  and  we        orient  it  such  that  the  axis  is  pointing  toward  the  center  of  the  earth. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">15</span><span sentence-index="11422" class=""> It  would  register            1</span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">15</span><span sentence-index="11422" class="">g</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11422</span><span sentence-index="11422" class=""> . </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11423</span><span sentence-index="11423" class="">  Now,  if  we  travel  far  away  from  any  mass,  such  that  there  is  no        gravity,  the  accelerometer  will  read  0. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">17</span><span sentence-index="11424" class=""> If  we  then  accelerate  it  such  that  in  one  second  it  goes        from  0  m/s  to  9.8  m/s,  the  accelerometer  will  read  a  steady  1</span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">17</span><span sentence-index="11424" class="">g</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11424</span><span sentence-index="11424" class="">  during  that        one-second  interval. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11425</span><span sentence-index="11425" class="">  Indeed,  it  is  impossible  to  tell  the  difference  between  acceleration  due  to        gravity  and  acceleration  due  to  changing  velocity.</span></span></a></p><p><a id="me21.0" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11428</span><span sentence-index="11428" class="">Real-life  motion  is  generally  nonsteady. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">22</span><span sentence-index="11429" class=""> Depending  on  your  application&apos;s  goals,  you  might        have  to  apply  different  smoothing  functions  such  as  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">22</span><span sentence-index="11429" class="">high-pass</span></span></em></span><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">22</span><span sentence-index="11429" class=""> or            </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">22</span><span sentence-index="11429" class="">low-pass  filters</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11429</span><span sentence-index="11429" class=""> . </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">23</span><span sentence-index="11430" class=""> This  </span></span></a><a id="I_indexterm2_id353595" class="indexterm"></a><a id="I_indexterm2_id353601" class="indexterm"></a><a id="I_indexterm2_id353607" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">26</span><span sentence-index="11433" class="">amounts  </span></span></a><a id="I_indexterm2_id353618" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">27</span><span sentence-index="11434" class="">to  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">27</span><span sentence-index="11434" class="">digital  signal  processing</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11435</span><span sentence-index="11435" class=""> ,  a  topic  that  has  consumed  entire        texts. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">29</span><span sentence-index="11436" class=""> One  example  we  can  recommend  is  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">29</span><span sentence-index="11436" class="">Digital  Signal  Processing:  A  Computer  Science            Perspective</span></span></em></span><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">29</span><span sentence-index="11436" class=""> by  </span></span></a><a id="I_indexterm2_id353632" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11437</span><span sentence-index="11437" class="">Jonathan  Y.  Stein  (Wiley).</span></span></a></p><p><a id="I_indexterm2_id353632" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">33</span><span sentence-index="11440" class="">Also,  many  accelerometers  have  a  method  to  set  </span></span></a><a id="I_indexterm2_id353643" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">34</span><span sentence-index="11441" class="">the  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">34</span><span sentence-index="11441" class="">polling  rate</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11442</span><span sentence-index="11442" class=""> ,  or  the  number  of  times  per  second  that  the        program  requests  updates  from  the  accelerometer. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">36</span><span sentence-index="11443" class=""> This  is  </span></span></a><a id="I_indexterm2_id353656" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">37</span><span sentence-index="11444" class="">called  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">37</span><span sentence-index="11444" class="">frequency</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11445</span><span sentence-index="11445" class="">  and  is  given  in  hertz  (Hz). </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11446</span><span sentence-index="11446" class="">  This  parameter  can        be  used  to  enhance  the  performance  of  the  program  when  fine  resolution  of  the  acceleration  over        time  is  not  needed.</span></span></a></p><p><a id="I_indexterm2_id353656" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11449</span><span sentence-index="11449" class="">When  you  accept  input  from  an  accelerometer&#x2014;or  do  any  other  kind  of  signal  processing&#x2014;you        have  to  accept  that  input  won&apos;t  come  precisely  when  you  want  it. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11450</span><span sentence-index="11450" class="">  The  operating  systems  normally        used  for  gaming&#x2014;Windows,  OS  X,  Linux&#x2014;are  not  real-time  environments. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">44</span><span sentence-index="11451" class=""> This  means  that  although        you  set  the  polling  rate  at  once  a  second,  this  guarantees  only  that  the  data  will  be  delivered            </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">44</span><span sentence-index="11451" class="">no  sooner  than</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11451</span><span sentence-index="11451" class="">  once  a  second. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11452</span><span sentence-index="11452" class="">  If  something  distracts  the  operating        system,  such  as  the  arrival  of  packets  on  the  network,  the  signal  you  get  from  the  accelerometer        may  be  delayed.</span></span></a></p><div class="sect1" title="Accelerometer Theory"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="accelerometer_theory"><a id="I_indexterm2_id353656" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">48</span><span sentence-index="11455" class="">Accelerometer  Theory</span></span></a></h2></div></div></div><p><a id="I_indexterm2_id353656" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">50</span><span sentence-index="11457" class="">The  way  in  which  </span></span></a><a id="ac21.1" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11458</span><span sentence-index="11458" class="">MEMS  measure  accelerometers  is  more  basic  in  principle  than  you  may  think. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11459</span><span sentence-index="11459" class="">  The            major  accomplishment  is  miniaturizing  the  technology  until  it  can  fit  inside  a  computer  chip! </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11460</span><span sentence-index="11460" class="">            To  clearly  illustrate  the  basic  principle,  we  will  first  show  you  the  mechanics  of  it  in  the            macro-scale  version  of  a  known  mass  and  spring. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">54</span><span sentence-index="11461" class=""> Let&apos;s  say  you  build  something  like  the            contraption  shown  in  </span></span></a><a class="xref" href="ch21.html#simple_accelerometer_in_absence_of_accel" title="Figure&#xA0;21-1.&#xA0;Simple accelerometer in absence of acceleration"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">55</span><span sentence-index="11462" class="">Figure&#xA0;21-1</span></span></a><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11463</span><span sentence-index="11463" class="">  and  take  it  on            an  elevator  in  an  area  where  there  is  no  gravity. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11464</span><span sentence-index="11464" class="">  We&apos;ll  worry  about  the  effects  of  gravity  in            a  minute.</span></span></p><div class="figure"><a id="simple_accelerometer_in_absence_of_accel"></a><div class="figure-contents"><a id="simple_accelerometer_in_absence_of_accel"></a><div class="mediaobject"><a id="simple_accelerometer_in_absence_of_accel"></a><a id="I_mediaobject2_id353737"><img style="width: 120.472440944882; " src="httpatomoreillycomsourceoreillyimages1598997.png" alt="Simple accelerometer in absence of acceleration"></a></div></div><div class="figure-title"><a id="I_mediaobject2_id353737"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">63</span><span sentence-index="11470" class="">Figure&#xA0;21-1.&#xA0;Simple  accelerometer  in  absence  of  acceleration</span></span></a></div></div><p><a id="I_mediaobject2_id353737"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11472</span><span sentence-index="11472" class="">As  you  can  see,  the  device  consists  of  a  known  mass  at  the  end  of  a  spring  next  to  a            measuring  stick. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11473</span><span sentence-index="11473" class="">  When  the  elevator  is  not  accelerating,  the  mass  is  at  the  0  mark. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">67</span><span sentence-index="11474" class=""> When  the            elevator  accelerates  up  or  down,  the  mass  at  the  end  of  the  spring  resists  that  </span></span></a><a id="I_indexterm2_id353763" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11475</span><span sentence-index="11475" class="">acceleration  and  tends  to  stay  at  rest. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">69</span><span sentence-index="11476" class=""> This  is  </span></span></a><a id="I_indexterm2_id353775" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11477</span><span sentence-index="11477" class="">Newton&apos;s  first  law  in  action. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11478</span><span sentence-index="11478" class="">  Inertial  loading  causes  the  spring  to  stretch  or            compress. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">72</span><span sentence-index="11479" class=""> If  the  elevator  is  accelerating  upward,  the  </span></span></a><a id="I_indexterm2_id353789" class="indexterm"></a><a id="I_indexterm2_id353799" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">74</span><span sentence-index="11481" class="">mass  will  cause  the  </span></span></a><a id="I_indexterm2_id353810" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11482</span><span sentence-index="11482" class="">spring  to  stretch  downward. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">76</span><span sentence-index="11483" class=""> Recall  from  </span></span></a><a class="xref" href="ch03.html" title="Chapter&#xA0;3.&#xA0;Force"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">77</span><span sentence-index="11484" class="">Chapter&#xA0;3</span></span></a><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">77</span><span sentence-index="11484" class=""> that  the  force            acting  on  a  spring  is  linearly  dependent  on  the  displacement  of  the  mass  via  the            equation:</span></span></p><table style="border: 0; " class="simplelist"><tbody><tr><td><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">77</span><span sentence-index="11484" class="">F</span></span><sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">77</span><span sentence-index="11484" class="">n</span></span></sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">77</span><span sentence-index="11484" class=""> =  kd</span></span></td></tr></tbody></table><p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">79</span><span sentence-index="11486" class="">We  can  directly  measure  the  </span></span><a id="I_indexterm2_id353843" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">80</span><span sentence-index="11487" class="">displacement,  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">80</span><span sentence-index="11487" class="">d</span></span></em></span><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">80</span><span sentence-index="11487" class="">,  so  we  can  determine  the  force  in  that            direction,  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">80</span><span sentence-index="11487" class="">n</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11488</span><span sentence-index="11488" class=""> . </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11489</span><span sentence-index="11489" class="">  As  the  mass  is  known,  voil&#xE0;!</span></span></a></p><table style="border: 0; " class="simplelist"><tbody><tr><td><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">83</span><span sentence-index="11490" class="">a</span></span><sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">83</span><span>n</span></span></sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">83</span><span sentence-index="11490" class=""> =  m/F</span></span><sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">83</span><span sentence-index="11490" class="">n</span></span></sub></td></tr></tbody></table><p><a id="I_indexterm2_id353843" class="indexterm"><span class="nonQuoteStr" gspkNameUnknown="Chapter" gsIndex="1"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11492</span><span sentence-index="11492" class="">As  an  aside,  the  fact  that  you  can  tell  that  you  are  accelerating  without  having  to  look            outside  the  elevator  is  what  makes  this  a  </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11493</span><span sentence-index="11493" style="border-bottom: solid orange 4px;" class="" gspkNameUnknown="Chapter" gsIndex="1"> &quot;noninertial  frame  of  reference,&quot; </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">87</span><span sentence-index="11494" class=""> as  discussed  in                </span></span></a><a class="xref" href="ch02.html" title="Chapter&#xA0;2.&#xA0;Kinematics"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">88</span><span sentence-index="11495" class="">Chapter&#xA0;2</span></span></a><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11496</span><span sentence-index="11496" class=""> . </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11497</span><span sentence-index="11497" class="">  No  worries  if  you  don&apos;t  totally  understand  that;  it  isn&apos;t            important  for  what  we  are  discussing  here.</span></span></p><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11499</span><span sentence-index="11499" class="">Now,  let&apos;s  put  our  elevator  back  on  earth. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">93</span><span sentence-index="11500" class=""> With  the  same  device,  the  mass  will  not  be  at  0            even  if  the  elevator  is  not  accelerating  because  </span></span><a id="I_indexterm2_id353893" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11501</span><span sentence-index="11501" class="">gravity  is  pulling  it  down. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11502</span><span sentence-index="11502" class="">  Previously  we  used  units  of  inches,  which  we  then            converted  to  force  and  finally  to  acceleration. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">96</span><span sentence-index="11503" class=""> However,  we  now  have  a  direct  measure  of  the            acceleration  due  to  gravity  and  could  easily  place  a  mark  on  where  the  mass  is  and  call  it                1</span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">96</span><span sentence-index="11503" class="">g</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11503</span><span sentence-index="11503" class=""> . </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11504</span><span sentence-index="11504" class="">  Also  we  could  place  marks  along  the  ruler  at  the  same  intervals. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">98</span><span sentence-index="11505" class="">           Now,  we  accelerate  the  elevator  upward  at  9.8  m/s</span></span><sup><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">98</span><span sentence-index="11505" class="">2</span></span></sup><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11505</span><span sentence-index="11505" class=""> . </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">99</span><span sentence-index="11506" class=""> The  mass  should            move  down  the  scale  to  2</span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">99</span><span sentence-index="11506" class="">g</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11506</span><span sentence-index="11506" class=""> ,  and  anyone  standing  in  the  elevator  would  feel            twice  as  heavy  as  normal.</span></span></a></p><p><a id="I_indexterm2_id353893" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">102</span><span sentence-index="11509" class="">Let&apos;s  say  we  wanted  to  accelerate  the  elevator  downward  at  9.8                m/s</span></span><sup><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">102</span><span sentence-index="11509" class="">2</span></span></sup><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11509</span><span sentence-index="11509" class=""> . </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11510</span><span sentence-index="11510" class="">  We  could  easily  do  this  by  just  releasing  the  brakes  and            letting  gravity  do  the  work. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11511</span><span sentence-index="11511" class="">  Now  in  freefall  we  don&apos;t  feel  gravity  at  all,  right? </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11512</span><span sentence-index="11512" class="">  That&apos;s            because  the  downward  acceleration  is  canceling  the  acceleration  due  to  gravity. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11513</span><span sentence-index="11513" class="">  The  mass  will            be  back  at  0  just  like  out  in  space,  far  from  any  gravitational  bodies. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11514</span><span sentence-index="11514" class="">  It  is  for  this  reason,            and  not  a  lack  of  gravity,  that  astronauts  float  around. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11515</span><span sentence-index="11515" class="">  They  are  in  freefall  around  the            earth.</span></span></a></p><p><a id="I_indexterm2_id353893" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">111</span><span sentence-index="11518" class="">Lastly,  if  we  accelerate  the  elevator  downward  at  2</span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">111</span><span>g</span></span></em></span><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">111</span><span sentence-index="11518" class="">,  the  mass  would            move  to  the  &#x2212;1</span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">111</span><span sentence-index="11518" class="">g</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11518</span><span sentence-index="11518" class="">  mark  on  the  ruler. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11519</span><span sentence-index="11519" class="">  This  is  because  the  downward            acceleration  is  now  overwhelming  gravity. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11520</span><span sentence-index="11520" class="">  Those  in  the  elevator  would  find  themselves  standing            on  the  ceiling  feeling  exactly  as  they  would  standing  on  the  ground! </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">114</span><span sentence-index="11521" class=""> In  fact,  one  of  </span></span></a><a id="I_indexterm2_id353944" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11522</span><span sentence-index="11522" class="">Einstein&apos;s  accomplishments  was  showing  that  it  is  impossible  to  distinguish            gravity  from  inertial  accelerations. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">116</span><span sentence-index="11523" class=""> We&apos;ll  leave  the  details  of  that  for  independent  study  and            get  back  to  accelerometers  in  the  form  of  </span></span></a><a id="I_indexterm2_id353954" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11524</span><span sentence-index="11524" class="">MEMS.</span></span></a></p><div class="sect2" title="MEMS Accelerometers"><div class="titlepage"><div><div><h3 class="title" id="mems_accelerometers"><a id="I_indexterm2_id353954" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">120</span><span sentence-index="11527" class="">MEMS  Accelerometers</span></span></a></h3></div></div></div><p><a id="I_indexterm2_id353954" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11529</span><span sentence-index="11529" class="">Micro-scale  accelerometers  are  not  that  much  different  from  the  machine  previously                described  but  generally  use  a  cantilevered  beam  instead  of  a  spring. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11530</span><span sentence-index="11530" class="">  To  track  more  than  one                axis,  sometimes  three  discrete  accelerometers  are  placed  out  of  plane  with  respect  to  one                another. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11531</span><span sentence-index="11531" class="">  Alternatively,  more  complex  models  use  elements  that  can  sense  all  three  directions                within  a  single  integrated  sensor. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11532</span><span sentence-index="11532" class="">  These  generally  give  better  results.</span></span></a></p><p><a id="I_indexterm2_id353954" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11535</span><span sentence-index="11535" class="">The  only  important  difference  from  the  aforementioned  examples,  besides  MEMS  being                thousands  of  times  smaller  in  scale  than  the  mass  and  spring,  is  how  to  measure  the                deflection  of  the  test  mass. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11536</span><span sentence-index="11536" class="">  There  are  three  common  methods  employed  in  accelerometers. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11537</span><span sentence-index="11537" class="">  For                most  game  devices  where  extreme  accuracy  isn&apos;t  required,  the  deflection  is  usually  measured                as  a  change  in  capacitance. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">131</span><span sentence-index="11538" class=""> This  is  somewhat  the  same  way  that  capacitive  touch  screens                work,  as  described  in  </span></span></a><a class="xref" href="ch20.html" title="Chapter&#xA0;20.&#xA0;Touch Screens"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">132</span><span sentence-index="11539" class="">Chapter&#xA0;20</span></span></a><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">132</span><span sentence-index="11539" class="">,  and  is  shown  in  </span></span><a class="xref" href="ch21.html#mems_cantilever_accelerometer" title="Figure&#xA0;21-2.&#xA0;MEMS cantilever accelerometer"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">134</span><span sentence-index="11541" class="">Figure&#xA0;21-2</span></span></a><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11541</span><span sentence-index="11541" class=""> .</span></span></p><div class="figure"><a id="mems_cantilever_accelerometer"></a><div class="figure-contents"><a id="mems_cantilever_accelerometer"></a><div class="mediaobject"><a id="mems_cantilever_accelerometer"></a><a id="I_mediaobject2_id354011"><img src="httpatomoreillycomsourceoreillyimages1598998.png" alt="MEMS cantilever accelerometer"></a></div></div><div class="figure-title"><a id="I_mediaobject2_id354011"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">140</span><span sentence-index="11547" class="">Figure&#xA0;21-2.&#xA0;MEMS  cantilever  accelerometer</span></span></a></div></div><p><a id="I_mediaobject2_id354011"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11549</span><span sentence-index="11549" class="">The  beam  deflects  under  the  influence  of  the  external  accelerations  of  the  test  mass  and                brings  two  charged  plates  farther  or  closer  together. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11550</span><span sentence-index="11550" class="">  This  changes  the  capacitance  of  the                system. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11551</span><span sentence-index="11551" class="">  This  change  can  then  be  calibrated  to  the  imposed  acceleration.</span></span></a></p><p><a id="I_mediaobject2_id354011"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">147</span><span sentence-index="11554" class="">Other  methods  include  integrating  </span></span></a><a id="I_indexterm2_id354038" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11555</span><span sentence-index="11555" class="">a  piezoresister  in  the  beam  itself  so  that  the  deflection  of  the  beam  changes                the  resistance  of  the  circuit. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11556</span><span sentence-index="11556" class="">  Although  this  ultimately  gives  better  results,  these  are                harder  to  manufacture. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11557</span><span sentence-index="11557" class="">  For  the  most  demanding  applications,  there  are  accelerometers  using                piezoelectric  elements  based  on  quartz  crystals. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">151</span><span sentence-index="11558" class=""> These  are  very  sensitive  even  during                high-frequency  changes  in  acceleration  but  are  generally  not  used  in  sensing  human-input                    </span></span></a><a id="I_indexterm2_id354050" class="indexterm"></a><a id="I_indexterm2_id354059" class="indexterm"></a><a id="I_indexterm2_id354069" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11561</span><span sentence-index="11561" class="">motion.</span></span></a></p></div><div class="sect2" title="Common Accelerometer Specifications"><div class="titlepage"><div><div><h3 class="title" id="common_accelerometer_specifications"><a id="I_indexterm2_id354069" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">157</span><span sentence-index="11564" class="">Common  Accelerometer  Specifications</span></span></a></h3></div></div></div><p><a id="I_indexterm2_id354069" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">159</span><span sentence-index="11566" class="">To  help  you  better  </span></span></a><a id="I_indexterm2_id354093" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11567</span><span sentence-index="11567" class="">experiment  with  accelerometers,  we&apos;ve  collected  the  specifications  on  a  few  of                the  most  common  accelerometers  in  use  at  the  time  of  writing. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">161</span><span sentence-index="11568" class=""> The  future  may  hold  cheap                accelerometers  based  on  quantum  tunneling</span></span></a><a id="I_indexterm2_id354106" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">162</span><span sentence-index="11569" class=""> that  can  provide  almost  limitless  accuracy,  but  </span></span></a><a class="xref" href="ch21.html#current_common_accelerometers" title="Table&#xA0;21-1.&#xA0;Current common accelerometers"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">164</span><span sentence-index="11571" class="">Table&#xA0;21-1</span></span></a><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11571</span><span sentence-index="11571" class="">  outlines  what  you&apos;ll  generally  be  working  with                for  now.</span></span></p><div class="table"><a id="current_common_accelerometers"><div class="table-title"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">166</span><span sentence-index="11573" class="">Table&#xA0;21-1.&#xA0;Current  common  accelerometers</span></span></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="col1"><col class="col2"><col class="col3"><col class="col4"></colgroup><thead><tr><td style="text-align: left; vertical-align: bottom; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">167</span><span sentence-index="11574" class="">Device</span></span></p>
              </td><td style="text-align: left; vertical-align: bottom; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">168</span><span sentence-index="11575" class="">Accelerometer  chip</span></span></p>
              </td><td style="text-align: left; vertical-align: bottom; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">169</span><span sentence-index="11576" class="">Sensor  range</span></span></p>
              </td><td style="text-align: left; vertical-align: bottom; border-bottom: 0.5pt solid ; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">170</span><span sentence-index="11577" class="">Sampling  rate</span></span></p>
              </td></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">171</span><span sentence-index="11578" class="">iPhone/iPad/  Motorola  Droid</span></span></p>
              </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">172</span><span sentence-index="11579" class="">LIS331D</span></span></p>
              </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">173</span><span sentence-index="11580" class="">&#xB1;2</span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">173</span><span sentence-index="11580" class="">g</span></span></em></span><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">173</span><span sentence-index="11580" class="">*</span></span></p>
              </td><td style="text-align: left; vertical-align: top; border-bottom: 0.5pt solid ; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">174</span><span sentence-index="11581" class="">100  Hz  or  400  Hz</span></span></p>
              </td></tr><tr><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">175</span><span sentence-index="11582" class="">Nintendo  Wii</span></span></p>
              </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">176</span><span sentence-index="11583" class="">ADXl330</span></span></p>
              </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">177</span><span sentence-index="11584" class="">&#xB1;3</span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">177</span><span sentence-index="11584" class="">g</span></span></em></span></p>
              </td><td style="text-align: left; vertical-align: top; border-bottom: 0.5pt solid ; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">178</span><span sentence-index="11585" class="">x-/y-axis:  0.5  Hz  to  1600  Hz</span></span></p>
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">179</span><span sentence-index="11586" class="">z-axis:  0.5  Hz  to  550  Hz</span></span></p>
              </td></tr><tr><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">180</span><span sentence-index="11587" class="">Sony  Six  Axis</span></span></p>
              </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">181</span><span sentence-index="11588" class="">Not  published</span></span></p>
              </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">182</span><span sentence-index="11589" class="">&#xB1;3</span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">182</span><span sentence-index="11589" class="">g</span></span></em></span></p>
              </td><td style="text-align: left; vertical-align: top; ">
                <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">183</span><span sentence-index="11590" class="">100  Hz</span></span></p>
              </td></tr></tbody></table></div></a></div><div class="note" title="Note"><h3 class="title"><a id="current_common_accelerometers"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">185</span><span sentence-index="11592" class="">Note</span></span></a></h3><p><a id="current_common_accelerometers"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11594</span><span sentence-index="11594" class="">The  chip  LIS221D  is  actually  capable  of  two  modes. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">188</span><span sentence-index="11595" class=""> One  mode  is                        &#xB1;2</span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">188</span><span>g</span></span></em></span><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">188</span><span sentence-index="11595" class=""> and  the  other  is  &#xB1;8</span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">188</span><span sentence-index="11595" class="">g</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11595</span><span sentence-index="11595" class=""> . </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11596</span><span sentence-index="11596" class="">  This  is  dynamically                    selectable  according  to  the  chips  datasheet;  however,  neither  iOS  nor  Android  allows                    developers  to  change  the  mode  through  the  API.</span></span></a></p></div><p><a id="current_common_accelerometers"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">192</span><span sentence-index="11599" class="">The  2</span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">192</span><span sentence-index="11599" class="">g</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11599</span><span sentence-index="11599" class="">  limit  for  phones  can  cause  problems  when  you&apos;re  attempting                to  record  motion. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11600</span><span sentence-index="11600" class="">  This  limitation  will  be  discussed  later  in  this  chapter. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11601</span><span sentence-index="11601" class="">  The  larger  range                of  Wii  and  Sony  controllers  demonstrate  that  they  are  dedicated  to  gaming  where  larger                accelerations  are  expected.</span></span></a></p></div><div class="sect2" title="Data Clipping"><div class="titlepage"><div><div><h3 class="title" id="data_clipping"><a id="current_common_accelerometers"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">197</span><span sentence-index="11604" class="">Data  Clipping</span></span></a></h3></div></div></div><p><a id="current_common_accelerometers"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">199</span><span sentence-index="11606" class="">The  human  arm  is  </span></span></a><a id="I_indexterm2_id354434" class="indexterm"></a><a id="I_indexterm2_id354443" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">201</span><span sentence-index="11608" class="">capable  of  exceeding  the  &#xB1;2</span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">201</span><span sentence-index="11608" class="">g</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11608</span><span sentence-index="11608" class="">  range  of  the  iPhone&apos;s  sensor                easily. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">202</span><span sentence-index="11609" class=""> The  values  reported  by  the  API  will  actually  exceed  2</span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">202</span><span>g</span></span></em></span><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">202</span><span sentence-index="11609" class=""> up  to                about  2.3</span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">202</span><span sentence-index="11609" class="">g</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11609</span><span sentence-index="11609" class=""> . </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11610</span><span sentence-index="11610" class="">  The  accuracy  of  these  values  that  exceed  the  specification                is  unknown. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11611</span><span sentence-index="11611" class="">  Regardless,  they  are  probably  at  least  as  accurate  as  the  option  of  trying  to                recreate  the  data,  so  if  required  they  can  be  used. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">205</span><span sentence-index="11612" class=""> All  values  above  this  upper  limit  will                be  reported  as  the  upper  limit  such  that  if  you  graphed  the  values,  they  would  look  like                    </span></span></a><a class="xref" href="ch21.html#acceleration_graph_showing_clipping" title="Figure&#xA0;21-3.&#xA0;Acceleration graph showing clipping"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">206</span><span sentence-index="11613" class="">Figure&#xA0;21-3</span></span></a><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11614</span><span sentence-index="11614" class=""> .</span></span></p><div class="figure"><a id="acceleration_graph_showing_clipping"></a><div class="figure-contents"><a id="acceleration_graph_showing_clipping"></a><div class="mediaobject"><a id="acceleration_graph_showing_clipping"></a><a id="I_mediaobject2_id354481"><img src="httpatomoreillycomsourceoreillyimages1598999.png" alt="Acceleration graph showing clipping"></a></div></div><div class="figure-title"><a id="I_mediaobject2_id354481"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">213</span><span sentence-index="11620" class="">Figure&#xA0;21-3.&#xA0;Acceleration  graph  showing  clipping</span></span></a></div></div><p><a id="I_mediaobject2_id354481"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11622</span><span sentence-index="11622" class="">There  are  several  different  ways  to  handle  data  clipping. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11623</span><span sentence-index="11623" class="">  One  is  to  discard  the  data  and                alert  the  user  that  he  has  exceeded  the  available  range. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11624</span><span sentence-index="11624" class="">  Another  is  to  attempt  to  recreate                the  missing  data. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11625</span><span sentence-index="11625" class="">  If  you  are  recording  the  data  for  later  processing,  you  can  use  both                segment  1  and  segment  2  to  fit  the  curve  between  the  point  at  which  the  data  began  to  be                clipped  and  the  point  in  which  meaningful  data  collection  is  resumed. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11626</span><span sentence-index="11626" class="">  This  is  highly                application  dependent,  and  the  curve  used  to  fit  the  data  will  have  to  be  matched  to  the                activity  at  hand. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11627</span><span sentence-index="11627" class="">  If  you  are  recording  the  data  for  later  processing,  you  can  use  both                segment  1  and  segment  2  to  give  your  data.</span></span></a></p><p><a id="I_mediaobject2_id354481"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11630</span><span sentence-index="11630" class="">If  you  are  attempting  to  process  the  signal  in  real  time,  you&apos;ll  have  only  segment  1  to                work  from. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11631</span><span sentence-index="11631" class="">  This  could  result  in  a  discontinuity  when  meaningful  data  collection  resumes,  and                you&apos;ll  have  to  decide  how  to  deal  with  that  given  the  particulars  of  what  you  are  doing  with                the  data.</span></span></a></p></div></div><div class="sect1" title="Sensing Orientation"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="sensing_orientation"><a id="I_mediaobject2_id354481"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">227</span><span sentence-index="11634" class="">Sensing  Orientation</span></span></a></h2></div></div></div><p><a id="I_mediaobject2_id354481"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">229</span><span sentence-index="11636" class="">Sensing  rotation  in  </span></span></a><a id="I_indexterm2_id354525" class="indexterm"></a><a id="I_indexterm2_id354535" class="indexterm"></a><a id="I_indexterm2_id354545" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11639</span><span sentence-index="11639" class="">three  degrees  of  freedom  amounts  to  sensing  a  rigid  body&apos;s  orientation  and  is  a            complex  problem  that  cannot  be  fully  resolved  using  only  accelerometers. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11640</span><span sentence-index="11640" class="">  Think  about  holding            the  device  vertically. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11641</span><span sentence-index="11641" class="">  If  you  rotate  the  device  about  the  axis  described  by  the  gravity            vector,  none  of  the  accelerometers  will  measure  any  change  in  the  force  acting  on  their  test            masses. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11642</span><span sentence-index="11642" class="">  We  can&apos;t  measure  that  degree  of  freedom. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">236</span><span sentence-index="11643" class=""> To  do  so,  we&apos;d  need  to  fix  a  </span></span></a><a id="I_indexterm2_id354560" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11644</span><span sentence-index="11644" class="">gyroscope  to  the  device,  and  even  these  run  into  problems  when  a  body  is  free  to            rotate  about  all  three  axes. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">238</span><span sentence-index="11645" class=""> See  </span></span></a><a class="xref" href="ch11.html" title="Chapter&#xA0;11.&#xA0;Rotation in 3D Rigid-Body Simulators"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">239</span><span sentence-index="11646" class="">Chapter&#xA0;11</span></span></a><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11647</span><span sentence-index="11647" class="">  for  a            discussion  on  Euler  angles.</span></span></p><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11649</span><span sentence-index="11649" class="">Now  let&apos;s  discuss  what  we  can  accomplish. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">243</span><span sentence-index="11650" class=""> First,  </span></span><a class="xref" href="ch21.html#accelerometer_coordinate_system" title="Figure&#xA0;21-4.&#xA0;Accelerometer coordinate system"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">244</span><span sentence-index="11651" class="">Figure&#xA0;21-4</span></span></a><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">244</span><span sentence-index="11651" class=""> demonstrates  the  coordinate  system</span></span><a id="I_indexterm2_id354583" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11653</span><span sentence-index="11653" class="">  we&apos;ll  use;  the  actual  coordinate  system  used  will  be  determined  by  the            manufacturer  of  your  device,  so  make  sure  to  check  its  documentation.</span></span></a></p><div class="figure"><a id="accelerometer_coordinate_system"></a><div class="figure-contents"><a id="accelerometer_coordinate_system"></a><div class="mediaobject"><a id="accelerometer_coordinate_system"></a><a id="I_mediaobject2_id354607"><img src="httpatomoreillycomsourceoreillyimages1599000.png" alt="Accelerometer coordinate system"></a></div></div><div class="figure-title"><a id="I_mediaobject2_id354607"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">252</span><span sentence-index="11659" class="">Figure&#xA0;21-4.&#xA0;Accelerometer  coordinate  system</span></span></a></div></div><p><a id="I_mediaobject2_id354607"><span class="nonQuoteStr" gspkNameUnknown="narrator" gsIndex="2"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11661</span><span sentence-index="11661" class="">Now  if  we  make  some  assumptions  based  on  how  a  user  will  hold  our  device,  we  can  determine            some  </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11662</span><span sentence-index="11662" class="" gspkNameUnknown="narrator" gsIndex="2"> &quot;gross&quot; </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11663</span><span sentence-index="11663" class="">  orientations. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">257</span><span sentence-index="11664" class=""> For  illustration,  </span></span></a><a class="xref" href="ch21.html#gross_acceleration_values_and_orientatio" title="Table&#xA0;21-2.&#xA0;Gross acceleration values and orientations"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">258</span><span sentence-index="11665" class="">Table&#xA0;21-2</span></span></a><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">258</span><span sentence-index="11665" class=""> gives  some  idea  of  what  each  value            would  be  for  each  gross  direction,  assuming  the  coordinate  system  shown  in  </span></span><a class="xref" href="ch21.html#accelerometer_coordinate_system" title="Figure&#xA0;21-4.&#xA0;Accelerometer coordinate system"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">260</span><span sentence-index="11667" class="">Figure&#xA0;21-4</span></span></a><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11667</span><span sentence-index="11667" class=""> .</span></span></p><div class="table"><a id="gross_acceleration_values_and_orientatio"><div class="table-title"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">262</span><span sentence-index="11669" class="">Table&#xA0;21-2.&#xA0;Gross  acceleration  values  and  orientations</span></span></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="col1"><col class="col2"><col class="col3"><col class="col4"></colgroup><thead><tr><td style="text-align: left; vertical-align: bottom; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">263</span><span sentence-index="11670" class="">Device  orientation</span></span></p>
            </td><td style="text-align: left; vertical-align: bottom; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">264</span><span sentence-index="11671" class="">X</span></span></p>
            </td><td style="text-align: left; vertical-align: bottom; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">265</span><span sentence-index="11672" class="">Y</span></span></p>
            </td><td style="text-align: left; vertical-align: bottom; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">266</span><span sentence-index="11673" class="">Z</span></span></p>
            </td></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">267</span><span sentence-index="11674" class="">Face  down  on  table</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">268</span><span sentence-index="11675" class="">0</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">269</span><span sentence-index="11676" class="">0</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">270</span><span sentence-index="11677" class="">1</span></span></p>
            </td></tr><tr><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">271</span><span sentence-index="11678" class="">Face  up  on  table</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">272</span><span sentence-index="11679" class="">0</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">273</span><span sentence-index="11680" class="">0</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">274</span><span sentence-index="11681" class="">&#x2212;1</span></span></p>
            </td></tr><tr><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">275</span><span sentence-index="11682" class="">Horizontal  on  table,  right  side  down</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">276</span><span sentence-index="11683" class="">1</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">277</span><span sentence-index="11684" class="">0</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">278</span><span sentence-index="11685" class="">0</span></span></p>
            </td></tr><tr><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">279</span><span sentence-index="11686" class="">Horizontal  on  table,  left  side  down</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">280</span><span sentence-index="11687" class="">&#x2212;1</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">281</span><span sentence-index="11688" class="">0</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">282</span><span sentence-index="11689" class="">0</span></span></p>
            </td></tr><tr><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">283</span><span sentence-index="11690" class="">Vertical  on  table,  bottom  down</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">284</span><span sentence-index="11691" class="">0</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">285</span><span sentence-index="11692" class="">&#x2212;1</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-bottom: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">286</span><span sentence-index="11693" class="">0</span></span></p>
            </td></tr><tr><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">287</span><span sentence-index="11694" class="nonQuoteStr">Vertical  on  table,  top  down</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">288</span><span sentence-index="11695" class="">0</span></span></p>
            </td><td style="text-align: left; vertical-align: top; border-right: 0.5pt solid ; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">289</span><span sentence-index="11696" class="">1</span></span></p>
            </td><td style="text-align: left; vertical-align: top; ">
              <p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">290</span><span sentence-index="11697" class="">0</span></span></p>
            </td></tr></tbody></table></div></a></div><p><a id="gross_acceleration_values_and_orientatio"><span class="nonQuoteStr" gspkNameUnknown="narrator" gsIndex="2"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11699</span><span sentence-index="11699" class="">There  are  a  few  things  to  note  here. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11700</span><span sentence-index="11700" class="">  First,  if  you  were  to  hold  the  phone  in  these            orientations  with  your  hand,  the  accelerometer  is  sensitive  enough  to  pick  up  small  deviations            from  true  vertical. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11701</span><span sentence-index="11701" class="">  We  are  considering  these  the  </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11702</span><span sentence-index="11702" class="" gspkNameUnknown="narrator" gsIndex="2"> &quot;gross&quot; </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11703</span><span sentence-index="11703" class="">  orientations  such  that  these  small            deviations  should  be  ignored.</span></span></a></p></div><div class="sect1" title="Sensing Tilt"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="sensing_tilt"><a id="gross_acceleration_values_and_orientatio"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">299</span><span sentence-index="11706" class="">Sensing  Tilt</span></span></a></h2></div></div></div><p><a id="gross_acceleration_values_and_orientatio"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">301</span><span sentence-index="11708" class="">Although  we  can&apos;t  </span></span></a><a id="ac21.3" class="indexterm"></a><a id="I_indexterm2_id355087" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11710</span><span sentence-index="11710" class="">determine  exactly  what  angle  the  user  is  holding  the  phone  about  all  three  axes,            we  can  pick  one  axis,  assume  that  it  is  pointing  down,  and  then  find  the  change  in  the  angle            from  that  assumption  over  time. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11711</span><span sentence-index="11711" class="">  For  instance,  if  the  phone  is  lying  on  a  table,  the  average            acceleration  in  the  z-direction  will  be  &#x2212;1,  and  in  the  other  directions,  0. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11712</span><span sentence-index="11712" class="">  Even  if  the  user            spins  the  phone,  the  values  will  remain  as  previously  indicated  and  we  cannot  sense  that            rotation. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11713</span><span sentence-index="11713" class="">  However,  if  the  user  lifts  one  edge  from  the  table&#x2014;we&apos;ll  call  this  tilting  it&#x2014;then            the  accelerometer  will  register  different  values. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11714</span><span sentence-index="11714" class="">  Some  of  the  acceleration  due  to  gravity  will            act  on  the  other  two  axes. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11715</span><span sentence-index="11715" class="">  By  sensing  this  change,  an  accelerometer  will  allow  us  to  determine            at  what  angle  the  device  is  tilted.</span></span></a></p><div class="sect2" title="Using Tilt to Control a Sprite"><div class="titlepage"><div><div><h3 class="title" id="using_tilt_to_control_a_sprite"><a id="I_indexterm2_id355087" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">311</span><span sentence-index="11718" class="">Using  Tilt  to  Control  a  Sprite</span></span></a></h3></div></div></div><p><a id="I_indexterm2_id355087" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">313</span><span sentence-index="11720" class="">Here  we  will  </span></span></a><a id="ti21.3.1" class="indexterm"></a><a id="ac21.3.1" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11722</span><span sentence-index="11722" class="">show  you  how  to  implement  code  for  a  simple  game  that  asks  the  user  to  move  an                avatar  to  a  target  by  tilting  the  phone. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11723</span><span sentence-index="11723" class="">  First,  we  will  briefly  show  an  example  of                determining  the  rotation  about  a  single  axis. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11724</span><span sentence-index="11724" class="">  Let&apos;s  assume  we  have  an  accelerometer  rotated                at  some  arbitrary  angle,  &#x3B1;,  which  is  what  our  algorithm  will  solve  for. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">318</span><span sentence-index="11725" class=""> As  previously                discussed,  accelerometers  generally  report  values  as  multiples  of  near  earth  gravity,                    </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">318</span><span sentence-index="11725" class="">g</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11725</span><span sentence-index="11725" class=""> . </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">319</span><span sentence-index="11726" class=""> For  the  following  example,  we  are  concerned  only  with  the  x-  and                y-axis  values,  a</span></span><sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">319</span><span sentence-index="11726" class="">x</span></span></sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">319</span><span sentence-index="11726" class=""> and  a</span></span><sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">319</span><span sentence-index="11726" class="">y</span></span></sub><span class="nonQuoteStr" gspkNameUnknown="narrator" gsIndex="2"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11726</span><span sentence-index="11726" class=""> ,  respectively. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11727</span><span sentence-index="11727" class="">  If  the                device  were  in  the  </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11728</span><span sentence-index="11728" class="" gspkNameUnknown="narrator" gsIndex="2"> &quot;upright&quot; </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">322</span><span sentence-index="11729" class=""> position,  then  a</span></span><sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">322</span><span sentence-index="11729" class="">x</span></span></sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">322</span><span sentence-index="11729" class=""> would  equal  0  and                    a</span></span><sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">322</span><span sentence-index="11729" class="">y</span></span></sub><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11729</span><span sentence-index="11729" class="">  would  equal  1. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11730</span><span sentence-index="11730" class="">  After  rotating  the  device,  we&apos;d  see  different                values  that  are  related  to  our  angle  &#x3B1;  by  use  of  the  arctangent  function. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">324</span><span sentence-index="11731" class=""> In  this  case,                because  </span></span></a><a id="I_indexterm2_id355174" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">325</span><span sentence-index="11732" class="">the  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">325</span><span sentence-index="11732" class="">single-argument  atan  function</span></span></em></span><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">325</span><span sentence-index="11732" class=""> included  in  most                programming  languages  doesn&apos;t  differentiate  between  diametrically  opposed  directions,  it  is                beneficial  to  use  the  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">325</span><span sentence-index="11732" class="">two-argument  function</span></span></em></span><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11733</span><span sentence-index="11733" class=""> . </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">327</span><span sentence-index="11734" class=""> The  relevant  C  code  is  as                follows:</span></span></a></p><a id="I_programlisting2_id355191"><pre class="programlisting">#define PI 3.14159

float find2dAngle(void){

    //LOCAL VARIABLES
    float alpha,
    double ax, ay;

    //POLL ACCELEROMETER FOR ACCELERATIONS, API SPECIFIC
    ax = getXacceleration();
    ay = getYacceleration();

    //FIND ANGLE
    alpha = atan2(ay,ax);

    if (alpha &gt;= 0){
        alpha = alpha * (180/PI);
    else {
        alpha = alpha * (-180/PI) + 180;
    }

    return alpha;
}</pre><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11736</span><span sentence-index="11736" class="">This  is  pretty  straightforward,  but  there  are  a  few  things  to  point  out. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">330</span><span sentence-index="11737" class=""> First,  the  way                in  which  your  program  will  get  results  from  the  accelerometer  will  vary  greatly  between                platforms,  so  we  have  encapsulated  that  API-specific  code  in  a  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">330</span><span sentence-index="11737" class="">getXacceleration()</span></span></code><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11737</span><span sentence-index="11737" class="">  function. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11738</span><span sentence-index="11738" class="">  In  fact,  most  operating  systems  will  be                continuously  polling  the  accelerometer  in  a  separate  thread,  so  you&apos;ll  have  to  have  a                logical  operator  that  tells  your  accelerometer  object  when  you  actually  want  to  see  those                values  passed  to  your  program. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11739</span><span sentence-index="11739" class="">  Example  Objective-C  code  for  the  accelerometer  in  the  iPhone                will  be  shown  later. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">333</span><span sentence-index="11740" class=""> Secondly,  you&apos;ll  notice  that  we  are  using  an  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">333</span><span sentence-index="11740" class="">if</span></span></code><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11740</span><span sentence-index="11740" class="">  statement  that  changes  the  radians  to  degrees  in  such  a  way  as  to  return                proper  0&#xB0;&#x2013;360&#xB0;  answers. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">334</span><span sentence-index="11741" class=""> This  avoids  having  to  pay  attention  to  the  sign,  as                    </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">334</span><span sentence-index="11741" class="">atan2</span></span></code><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11741</span><span sentence-index="11741" class="">  returns  only  answers  between  0&#xB0;  and  180&#xB0;,  using  a  negative  value                to  represent  the  other  half  of  the  range. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11742</span><span sentence-index="11742" class="">  For  example,  an  output  of  0&#xB0;  means  the  device  is                vertical,  an  output  of  90&#xB0;  means  the  device  is  rotated  90&#xB0;  to  the  left,  and  an  output  of                180&#xB0;  means  the  device  is  upside  down.</span></span></p><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11744</span><span sentence-index="11744" class="">Now  let&apos;s  extend  this  to  two  dimensions. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11745</span><span sentence-index="11745" class="">  This  will  tell  us  not  only  how  far  the  phone  is                from  vertical  about  one  axis,  but  its  inclination  about  the  y-axis  as  well.</span></span></p></a></div><div class="sect2" title="Two Degrees of Freedom"><div class="titlepage"><div><div><h3 class="title" id="two_degrees_of_freedom"><a id="I_programlisting2_id355191"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">341</span><span sentence-index="11748" class="nonQuoteStr">Two  Degrees  of  Freedom</span></span></a></h3></div></div></div><p><a id="I_programlisting2_id355191"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">343</span><span sentence-index="11750" class="">Now  let&apos;s  say  that  we  want  to  </span></span></a><a id="de21.3.2" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11751</span><span sentence-index="11751" class="">develop  a  game  in  which  we  control  a  sprite  moving  in  a  2D  world. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11752</span><span sentence-index="11752" class="">  The  user  would                hold  the  device  as  if  it  were  lying  on  a  table  and  look  down  from  above. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11753</span><span sentence-index="11753" class="">  He  or  she  would                then  tilt  the  phone  out  of  that  plane  to  get  the  sprite  to  move  in  the  desired  direction. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11754</span><span sentence-index="11754" class="">                The  fraction  of  gravity  that  the  accelerometer  is  now  experiencing  in  the  x-  and                y-directions  will  be  inputs  into  our  simulation.</span></span></a></p><p><a id="de21.3.2" class="indexterm"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">350</span><span sentence-index="11757" class="">The  example  will  be  demonstrated  </span></span></a><a id="ob21.3.2" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11758</span><span sentence-index="11758" class="">using  Objective-C  code  for  the  iPhone,  and  we&apos;ll  be  using  the  Qwartz2D  graphics                framework. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11759</span><span sentence-index="11759" class="">  If  you  aren&apos;t  familiar  with  Objective-C,  don&apos;t  worry&#x2014;we&apos;ll  explain  what  we  are                doing  in  each  step,  and  you  can  port  that  code  to  whatever  language  you  are  working                in.</span></span></a></p><p><a id="ob21.3.2" class="indexterm"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11762</span><span sentence-index="11762" class="">The  first  step  will  be  to  set  up  our  accelerometer. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">356</span><span sentence-index="11763" class=""> In  this  case  we  are  going  to                initialize  it  in  our  </span></span><em class="filename"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">356</span><span sentence-index="11763" class="">tiltViewController.m</span></span></em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">356</span><span sentence-index="11763" class=""> file  so  that                we  have:</span></span></a></p><a id="I_programlisting2_id355303"><pre class="programlisting">- (void)viewDidLoad
{
    UIAccelerometer *accelerometer = [UIAccelerometer sharedAccelerometer];
    accelerometer.delegate  = self;
    accelerometer.updateInterval = kPollingRate;
    [super viewDidLoad];
}</pre><p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">358</span><span sentence-index="11765" class="">The  important  concept  here  is  that  we  have  defined  a  name  for  our  accelerometer  object,                    </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">358</span><span sentence-index="11765" class="">accelerometer</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">358</span><span sentence-index="11765" class="">,  and  we  have  set  its  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">358</span><span sentence-index="11765" class="">updateInterval</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">358</span><span sentence-index="11765" class=""> property  to  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">358</span><span sentence-index="11765" class="">kPollingRate</span></span></code><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11765</span><span sentence-index="11765" class=""> . </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">359</span><span sentence-index="11766" class=""> This  constant  was  defined  in  </span></span><em class="filename"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">359</span><span sentence-index="11766" class="">tiltViewController.h</span></span></em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">359</span><span sentence-index="11766" class=""> as  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">359</span><span sentence-index="11766" class="">(1.0f/60.0f)</span></span></code><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11766</span><span sentence-index="11766" class=""> ,  which                corresponds  to  60  Hz. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11767</span><span sentence-index="11767" class="">  In  other  words,  this  tells  the  operating  system  to  update  our                program&apos;s  accelerometer  object  60  times  a  second. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">361</span><span sentence-index="11768" class=""> Also  in  </span></span><em class="filename"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">361</span><span sentence-index="11768" class="">tiltViewController.m</span></span></em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">361</span><span sentence-index="11768" class="">,  we  write  what  happens  when  the  accelerometer  object  gets                updated  via  the  accelerometer&apos;s  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">361</span><span sentence-index="11768" class="">didAccelerate:</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">361</span><span sentence-index="11768" class=""> function                as  follows:</span></span></p></a><a id="I_programlisting2_id355359"><pre class="programlisting">- (void)accelerometer:(UIAccelerometer *)accelerometer 
didAccelerate:(UIAcceleration *)acceleration{
    [(SpriteView *)self.view setAcceleration:acceleration];
    [(SpriteView *)self.view draw];
}</pre><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11770</span><span sentence-index="11770" class="">This  function  is  called  every  time  the  acceleration  object  is  updated  and  does  two                things. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">364</span><span sentence-index="11771" class=""> First,  it  takes  the  acceleration  data  from  the  accelerometer  and  passes  it  to  the                    </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">364</span><span sentence-index="11771" class="">SpriteView</span></span></code><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11771</span><span sentence-index="11771" class="">  class,  which  we&apos;ll  talk  about  in  a  second. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">365</span><span sentence-index="11772" class="">               Then  it  tells  the  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">365</span><span sentence-index="11772" class="">SpriteView</span></span></code><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11772</span><span sentence-index="11772" class="">  to  go  ahead  and  redraw                itself.</span></span></p><p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">367</span><span sentence-index="11774" class="">The  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">367</span><span sentence-index="11774" class="">SpriteView</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">367</span><span sentence-index="11774" class=""> class  is  where  the  action  happens  and                consists  of  a  header  file,  </span></span><em class="filename"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">367</span><span sentence-index="11774" class="">SpriteView.h</span></span></em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">367</span><span sentence-index="11774" class="">,  where  we                define  the  following  global  variables:</span></span></p><div class="variablelist"><dl><dt><span class="term"><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">367</span><span sentence-index="11774" class="">UIImage  *sprite</span></span></code></span></dt><dd><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11775</span><span sentence-index="11775" class="">A  pointer  to  the  image  that  will  be  used  to  represent  our  sprite  on  the                            screen.</span></span></p></dd><dt><span class="term"><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">369</span><span sentence-index="11776" class="">currentPos</span></span></code></span></dt><dd><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11777</span><span sentence-index="11777" class="">The  position  on  the  screen  where  we  want  the  sprite  to  be  drawn.</span></span></p></dd><dt><span class="term"><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">371</span><span sentence-index="11778" class="">prevPos</span></span></code></span></dt><dd><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11779</span><span sentence-index="11779" class="">The  previous  position  of  the  sprite  on  the  screen. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11780</span><span sentence-index="11780" class="">  We  will  use  this  to  tell  the                            draw  function  what  parts  of  the  screen  need  to  be  redrawn.</span></span></p></dd><dt><span class="term"><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">374</span><span sentence-index="11781" class="">UIAcceleration  *acceleration</span></span></code></span></dt><dd><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11782</span><span sentence-index="11782" class="">A  special  Objective-C  data  type  to  hold  data  from  the  accelerometer.</span></span></p></dd><dt><span class="term"><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">376</span><span sentence-index="11783" class="">CGFloat  xVelocity</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">376</span><span sentence-index="11783" class=""> and  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">376</span><span sentence-index="11783" class="">CGFloat  yVelocity</span></span></code></span></dt><dd><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11784</span><span sentence-index="11784" class="">Float  variables  to  hold  the  current  velocity  in  the  x-direction  and  y-direction,                            respectively.</span></span></p></dd><dt><span class="term"><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">378</span><span sentence-index="11785" class="">CGFloat  convertX</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">378</span><span sentence-index="11785" class=""> and  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">378</span><span sentence-index="11785" class="">CGFloat  convertY</span></span></code></span></dt><dd><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11786</span><span sentence-index="11786" class="">Float  variables  to  hold  the  ratios  for  converting  our  physics  engine&apos;s  results  in                            meters  to  pixels  based  on  an  assumed  world  size.</span></span></p></dd></dl></div><p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">381</span><span sentence-index="11788" class="">Additionally,  we&apos;ve  defined  the  following  global  constants:</span></span></p><div class="variablelist"><dl><dt><span class="term"><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">381</span><span sentence-index="11788" class="">g</span></span></code></span></dt><dd><p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">382</span><span sentence-index="11789" class="">Near  earth  gravity  value,  set  at  9.8  m/s</span></span><sup><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">382</span><span sentence-index="11789" class="">2</span></span></sup><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11789</span><span sentence-index="11789" class=""> . </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">383</span><span sentence-index="11790" class=""> This  will                            convert  the  accelerometer&apos;s  values  from  </span></span><span class="emphasis"><em><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">383</span><span sentence-index="11790" class="">g</span></span></em></span><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">383</span><span sentence-index="11790" class=""> to                                m/s</span></span><sup><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">383</span><span sentence-index="11790" class="">2</span></span></sup><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11790</span><span sentence-index="11790" class="">  for  use  in  calculating  velocity. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11791</span><span sentence-index="11791" class="">  This  can  also  be                            tuned  to  represent  an  arbitrary  acceleration  instead  of  just  using  gravity  as  the                            force  (e.g.,  percent  of  jet  engine  thrust).</span></span></p></dd><dt><span class="term"><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">385</span><span sentence-index="11792" class="">kWorldHeight</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">385</span><span sentence-index="11792" class=""> and  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">385</span><span sentence-index="11792" class="">kWorldWidth</span></span></code></span></dt><dd><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11793</span><span sentence-index="11793" class="">These  values  are  used  to  allow  the  programmer  to  change  the  assumed  world                            dimensions. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11794</span><span sentence-index="11794" class="">  Higher  values  mean  each  pixel  is  a  greater  distance  in  meters. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11795</span><span sentence-index="11795" class="">  The  world                            will  always  be  scaled  to  fit  on  the  screen,  so  a  large  world  means  the  sprite  will                            appear  to  move  slower  (a  few  pixels  at  a  time)  for  a  given  acceleration. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11796</span><span sentence-index="11796" class="">  Note  that  our                            current  code  doesn&apos;t  scale  the  sprite.</span></span></p></dd></dl></div><p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">391</span><span sentence-index="11798" class="">Now  we&apos;ll  show  you  how  we  use  these  variables  in  </span></span><em class="filename"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">391</span><span sentence-index="11798" class="">SpriteView.m</span></span></em><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11798</span><span sentence-index="11798" class="">  to  move  our  sprite  on  our  screen  as  a  result  of  the  accelerometer                values. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">392</span><span sentence-index="11799" class=""> First,  we  have  some  initialization  to  do,  which  takes  place  in  the  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">392</span><span sentence-index="11799" class="">initWithCoder:</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">392</span><span sentence-index="11799" class=""> method  that  runs  the  first  time  the  view  is                loaded:</span></span></p></a><a id="I_programlisting2_id355617"><pre class="programlisting">-(id)initWithCoder:(NSCoder *)coder {
    if((self = [super initWithCoder:coder])){
        self.sprite = [UIImage imageNamed:@&quot;sprite.png&quot;];
        self.currentPos = CGPointMake((self.bounds.size.width / 2.0f) +
(sprite.size.width / 2.0f), (self.bounds.size.height /2.0f)+(sprite.size.height /2.0f));
        xVelocity = 0.0f;
        yVelcoity = 0.0f;

        convertX = self.bounds.size.width / kWorldWidth;
        convertY = self.bounds.size.height / kWorldHeight;

    }
    return self;
}</pre><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11801</span><span sentence-index="11801" class="">Most  of  this  is  pretty  straightforward. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11802</span><span sentence-index="11802" class="">  We  tell  our  program  where  to  find  the  sprite                image  we&apos;ve  chosen  and  set  its  initial  position  to  the  center  of  the  screen. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11803</span><span sentence-index="11803" class="">  We  also  set  its                initial  velocity  to  0  in  both  directions. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">397</span><span sentence-index="11804" class=""> We  then  go  ahead  and  initialize  our  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">397</span><span sentence-index="11804" class="">convertX</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">397</span><span sentence-index="11804" class=""> and  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">397</span><span sentence-index="11804" class="">convertY</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">397</span><span sentence-index="11804" class="">               variables  based  on  the  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">397</span><span sentence-index="11804" class="">self.bounds.size</span></span></code><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11804</span><span sentence-index="11804" class="">  property,  which                gives  the  bounds  of  the  view  in  pixels. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11805</span><span sentence-index="11805" class="">  We&apos;ll  show  exactly  how  this  affects  our  program                later. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">399</span><span sentence-index="11806" class=""> Next,  we&apos;ll  write  a  custom  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">399</span><span sentence-index="11806" class="">mutator</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">399</span><span sentence-index="11806" class=""> for  the                    </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">399</span><span sentence-index="11806" class="">CurrentPos</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">399</span><span sentence-index="11806" class=""> variable:</span></span></p></a><a id="I_programlisting2_id355665"><pre class="programlisting">- (void)setCurrentPos:(CGPoint)newPos {
    prevPos = currentPos;
    currentPos = newPos;

    if(currentPos.x &lt;0){
        currentPos.x = 0;
        xVelocity = 0.0f;
    }
    if(currentPos.y &lt;0){
        currentPos.y = 0;
        yVelcoity = 0.0f;
    }
    if(currentPos.x &gt; self.bounds.size.width - sprite.size.width){
        currentPos.x = self.bounds.size.width - sprite.size.width;
        xVelocity = 0.0f;
    }
    if(currentPos.y &gt; self.bounds.size.height - sprite.size.height){
        currentPos.y = self.bounds.size.height - sprite.size.height;
        yVelocity = 0.0f;
    }

    CGRect curSpriteRect = CGRectMake(currentPos.x, currentPos.y, 
currentPos.x+sprite.size.width, currentPos.y+sprite.size.height);
    CGRect prevSpriteRect = CGRectMake(prevPos.x, prevPos.y, 
prevPos.x+sprite.size.width, currentPos.y+sprite.size.height);
    [self setNeedsDisplayInRect:CGRectUnion(curSpriteRect, prevSpriteRect)];

}</pre><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11808</span><span sentence-index="11808" class="">In  case  you  are  unfamiliar  with  Objective-C,  when  you  define  a  class  instance  variable                it  will  automatically  define  a  mutator  that  simply  updates  the  value  of  the  variable  to  the                value  you  are  passing  it. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11809</span><span sentence-index="11809" class="">  However,  in  the  preceding  example  we  are  overriding  that  mutator                to  do  some  additional  work. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">403</span><span sentence-index="11810" class=""> The  first  thing  we  do  is  to  set  the  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">403</span><span sentence-index="11810" class="">prevPos</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">403</span><span sentence-index="11810" class=""> variable  to  the  current  position  of  the  sprite  and  then  update  the                    </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">403</span><span sentence-index="11810" class="">currentPos</span></span></code><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11810</span><span sentence-index="11810" class="">  with  the  value  the  mutator  was  given. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11811</span><span sentence-index="11811" class="">                However,  our  physics  engine  isn&apos;t  going  to  include  collision  response  with  the  screen                boundaries,  so  we  go  on  to  check  if  the  sprite  has  reached  the  screen  edge. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11812</span><span sentence-index="11812" class="">  If  so,  we  simply                tell  the  program  to  leave  it  on  the  edge  and  to  set  the  velocity  in  that  direction  to  0. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11813</span><span sentence-index="11813" class="">                Lastly,  we  define  a  couple  of  rectangles  based  on  the  new  position  of  the  sprite  and  the  old                position  of  the  sprite. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">407</span><span sentence-index="11814" class=""> After  we  union  those  rectangles  together,  we  tell  the  operating                system  to  redraw  the  screen  in  that  area  with  the  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">407</span><span sentence-index="11814" class="">setNeedDisplayInRect:</span></span></code><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11814</span><span sentence-index="11814" class="">  method. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">408</span><span sentence-index="11815" class=""> As  you  might  recall,  our  accelerometer  object  is                calling  the  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">408</span><span sentence-index="11815" class="">draw</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">408</span><span sentence-index="11815" class=""> method  every  time  it  updates,  and  it  is                in  this  method  that  we  will  put  our  physics  engine:</span></span></p></a><a id="I_programlisting2_id355714"><pre class="programlisting">- (void)draw {
    static NSDate *lastUpdateTime;

    if (lastUpdateTime != nil) {
        NSTimeInterval secondsSinceUpdate = -([lastUpdateTime
timeIntervalSinceNow]); //calculates interval in seconds from last update

        //Calculate displacement
        CGFloat deltaX = xVelocity * secondsSinceUpdate + 
((acceleration.x*g*secondsSinceUpdate*secondsSinceUpdate)/2); // METERS
        CGFloat deltaY = yVelocity * secondsSinceUpdate + 
((acceleration.y*g*secondsSinceUpdate*secondsSinceUpdate)/2); // METERS

        //Converts from meters to pixels based on defined World size
        deltaX = deltaX * convertX;
        deltaY = deltaY * convertY;

        //Calculate new velocity at new current position
        xVelocity = xVelocity + acceleration.x * g * secondsSinceUpdate; //assumes
acceleration was constant over last update interval
        yVelocity = yVelocity - (acceleration.y * g * secondsSinceUpdate); //assumes 
acceleration was constant over last update interval

        //Mutate currentPos which will update screen
        self.currentPos = CGPointMake(self.currentPos.x + deltaX, 
self.currentPos.y + deltaY);

    }

    [lastUpdateTime release];
    lastUpdateTime = [[NSDate alloc] init];

}</pre><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11817</span><span sentence-index="11817" class="">Previously,  we  discussed  issues  with  timing  when  working  with  accelerometer  data. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11818</span><span sentence-index="11818" class="">  In                this  case,  Objective-C  makes  it  very  easy  to  get  the  correct  elapsed  time  in  seconds. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">412</span><span sentence-index="11819" class=""> We                first  define  a  static  variable,  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">412</span><span sentence-index="11819" class="">lastUpdateTime</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">412</span><span sentence-index="11819" class="">,  as  an                    </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">412</span><span sentence-index="11819" class="">NSDate</span></span></code><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11819</span><span sentence-index="11819" class="">  type. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">413</span><span sentence-index="11820" class=""> This  type  has  a  built-in  function  to  give                the  time  interval  in  seconds  from  now,  which  we  assign  to  an  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">413</span><span sentence-index="11820" class="">NSTimeInterval</span></span></code><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11820</span><span sentence-index="11820" class="">  variable. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11821</span><span sentence-index="11821" class="">  Skipping  down  to  the  last  two  lines,  we  are  simply                updating  the  last  update  time  by  releasing  and  reinitializing  the  variable. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11822</span><span sentence-index="11822" class="">  As  it  is  static,                it  will  remain  even  after  the  function  returns. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">416</span><span sentence-index="11823" class=""> If  you  are  using  a  lower-level  language,  you                might  have  to  write  your  own  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">416</span><span sentence-index="11823" class="">timeIntervalSinceNow</span></span></code><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11823</span><span sentence-index="11823" class="">                function  that  takes  into  account  the  particular  clock  frequency  of  the  system.</span></span></p></a><p><a id="I_programlisting2_id355714"><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11826</span><span sentence-index="11826" class="">Now  that  we  have  our  time  interval  in  seconds,  we  can  calculate  our  new  position. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">420</span><span sentence-index="11827" class=""> Recall                from  </span></span></a><a class="xref" href="ch02.html" title="Chapter&#xA0;2.&#xA0;Kinematics"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">421</span><span sentence-index="11828" class="">Chapter&#xA0;2</span></span></a><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">421</span><span sentence-index="11828" class="">:</span></span></p><table style="border: 0; " class="simplelist"><tbody><tr><td><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">421</span><span sentence-index="11828" class="">s</span></span><sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">421</span><span>2</span></span></sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">421</span><span sentence-index="11828" class=""> =  s</span></span><sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">421</span><span>1</span></span></sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">421</span><span sentence-index="11828" class=""> +  v</span></span><sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">421</span><span sentence-index="11828" class="">1</span></span></sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">421</span><span sentence-index="11828" class=""> t                    +  (a  t</span></span><sup><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">421</span><span sentence-index="11828" class="">2</span></span></sup><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">421</span><span sentence-index="11828" class="">)/2</span></span></td></tr></tbody></table><p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">423</span><span sentence-index="11830" class="">which  we  have  rearranged  to  be:</span></span></p><table style="border: 0; " class="simplelist"><tbody><tr><td><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">423</span><span sentence-index="11830" class="">&#x394;s  =  s</span></span><sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">423</span><span>2</span></span></sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">423</span><span sentence-index="11830" class=""> &#x2212;  s</span></span><sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">423</span><span>1</span></span></sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">423</span><span sentence-index="11830" class=""> =                        v</span></span><sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">423</span><span sentence-index="11830" class="">1</span></span></sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">423</span><span sentence-index="11830" class=""> t  +  (a  t</span></span><sup><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">423</span><span sentence-index="11830" class="">2</span></span></sup><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">423</span><span sentence-index="11830" class="">)/2</span></span></td></tr></tbody></table><p><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">424</span><span sentence-index="11831" class="">This  gets  programmed  as:</span></span></p><a id="I_programlisting2_id355829"><pre class="programlisting">        <span class="strong"><strong>CGFloat deltaX = xVelocity * secondsSinceUpdate + ((acceleration.x*g*secondsSinceUpdate*secondsSinceUpdate)/2); // METERS</strong></span></pre><p><span class="nonQuoteStr"><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11833</span><span sentence-index="11833" class="">We  then  convert  this  displacement  in  meters  to  displacement  in  pixels  using  an                appropriate  ratio  for  the  size  of  our  world. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11834</span><span sentence-index="11834" class="">  Before  we  can  move  on,  we  have  to  calculate  our                new  velocity  at  our  new  position. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">428</span><span sentence-index="11835" class=""> So  we  again  assume  the  acceleration  as  constant  over  the                update  interval,  and  recalling:</span></span></p><table style="border: 0; " class="simplelist"><tbody><tr><td><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">428</span><span sentence-index="11835" class="">v</span></span><sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">428</span><span sentence-index="11835" class="">2</span></span></sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">428</span><span sentence-index="11835" class=""> =  v</span></span><sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">428</span><span sentence-index="11835" class="">1</span></span></sub><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">428</span><span sentence-index="11835" class=""> +  a  &#x394;t</span></span></td></tr></tbody></table></a><p><a id="I_programlisting2_id355829"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">430</span><span sentence-index="11837" class="">from  </span></span></a><a class="xref" href="ch02.html" title="Chapter&#xA0;2.&#xA0;Kinematics"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">431</span><span sentence-index="11838" class="">Chapter&#xA0;2</span></span></a><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">431</span><span sentence-index="11838" class="">,  we  can  solve  for  the  new  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">431</span><span sentence-index="11838" class="">xVelocity</span></span></code><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">431</span><span sentence-index="11838" class=""> with:</span></span></p><a id="I_programlisting2_id355878"><pre class="programlisting"><span class="strong"><strong>xVelocity = xVelocity + acceleration.x * g * secondsSinceUpdate;</strong></span></pre></a><p><a id="I_programlisting2_id355878"><span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11842</span><span sentence-index="11842" class="">As  you  can  see  from  the  complete  method  description,  the  code  of  the  y-direction  is                similar. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">436</span><span sentence-index="11843" class=""> Finally,  we  call  the  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">436</span><span sentence-index="11843" class="">currentPos</span></span></code><span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11843</span><span sentence-index="11843" class="">  mutator  to  set                the  new  position  based  on  the  change  in  displacements. </span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11844</span><span sentence-index="11844" class="">  Recall  that  this  is  a  custom  mutator                that  also  tells  the  operating  system  to  update  the  display. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">438</span><span sentence-index="11845" class=""> After  the  </span></span><code class="literal"><span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">438</span><span sentence-index="11845" class="">draw</span></span></code><span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11845</span><span sentence-index="11845" class="">  method  is  finished,  the  accelerometer  waits  1/60  of  a                second  and  then  calls  it  again. </span><span style="background-color: lightgray; padding: 4px;" class="spanSentenceIndexNumber">439</span><span sentence-index="11846" class=""> You  could  extend  this  program  by  adding  in  friction,  fluid                resistance,  and  collisions  with  the  screen  boundaries  using  the  methods  outlined  in  the                other  chapters  of  this  </span></span></a><a id="I_indexterm2_id355910" class="indexterm"></a><a id="I_indexterm2_id355919" class="indexterm"></a><a id="I_indexterm2_id355928" class="indexterm"></a><a id="I_indexterm2_id355938" class="indexterm"></a><a id="I_indexterm2_id355947" class="indexterm"><span><span style="margin-right: 5px; margin-left: 5px;" class="spanSentenceIndexNumber">11851</span><span sentence-index="11851" class="">book.</span></span></a></p></div></div></section><a id="I_indexterm2_id355947" class="indexterm">
</a></body></html>